{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeSafeAreaContext","_chat","_interopRequireDefault","_groupChannel","_openChannel","_uikitReactNativeFoundation","_uikitUtils","_LocalizationCtx","_PlatformServiceCtx","_ReactionCtx","_SendbirdChatCtx","_UserProfileCtx","_EmojiManager","_ImageCompressionConfig","_InternalLocalCacheStorage","_MentionConfig","_MentionManager","_StringSet","_dynamicModule","_version","_InternalErrorBoundaryContainer","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","NetInfo","SBUDynamicModule","SendbirdUIKit","freeze","VERSION","PLATFORM","Platform","OS","toLowerCase","DEFAULT","AUTO_PUSH_TOKEN_REGISTRATION","CHANNEL_LIST_TYPING_INDICATOR","CHANNEL_LIST_MESSAGE_RECEIPT_STATUS","USE_USER_ID_FOR_NICKNAME","USER_MENTION","IMAGE_COMPRESSION","MESSAGE_SEARCH","exports","SendbirdUIKitContainer","_ref","children","appId","chatOptions","platformServices","localization","styles","errorBoundary","toast","userProfile","userMention","imageCompression","defaultStringSet","stringSet","StringSetEn","isFirstMount","useIsFirstMount","unsubscribes","useRef","internalStorage","useMemo","localCacheStorage","InternalLocalCacheStorage","undefined","sdkInstance","setSdkInstance","useState","sendbird","initializeSendbird","onInitialized","current","chatSDK","emojiManager","EmojiManager","mentionManager","config","MentionConfig","mentionLimit","MENTION_LIMIT","suggestionLimit","SUGGESTION_LIMIT","debounceMills","DEBOUNCE_MILLS","delimiter","DELIMITER","trigger","TRIGGER","MentionManager","enableUserMention","imageCompressionConfig","ImageCompressionConfig","compressionRate","COMPRESSION_RATE","width","height","useLayoutEffect","forEach","u","renderChildren","disabled","createElement","SafeAreaProvider","SendbirdChatProvider","enableAutoPushTokenRegistration","enableChannelListTypingIndicator","enableChannelListMessageReceiptStatus","enableUseUserIdForNickname","enableImageCompression","enableMessageSearch","LocalizationProvider","PlatformServiceProvider","fileService","file","notificationService","notification","clipboardService","clipboard","mediaService","media","UIKitThemeProvider","theme","LightUIKitTheme","HeaderStyleProvider","HeaderComponent","Header","defaultTitleAlign","defaultHeaderTitleAlign","statusBarTranslucent","ToastProvider","dismissTimeout","UserProfileProvider","onCreateChannel","onBeforeCreateChannel","ReactionProvider","LocalizationContext","Consumer","value","STRINGS","DialogProvider","defaultLabels","alert","ok","DIALOG","ALERT_DEFAULT_OK","prompt","PROMPT_DEFAULT_OK","cancel","PROMPT_DEFAULT_CANCEL","placeholder","PROMPT_DEFAULT_PLACEHOLDER","Sendbird","init","modules","GroupChannelModule","OpenChannelModule","localCacheEnabled","Boolean","useAsyncStorageStore","newInstance","addExtension","addEventListener","_chatSDK$setOnlineLis","_chatSDK","_chatSDK$setOfflineLi","_chatSDK2","NOOP","listener","callback","callbackType","callCount","unsubscribe","state","online","isConnected","isInternetReachable","push","setOnlineListener","onOnline","setOfflineListener","onOffline","_default"],"sources":["SendbirdUIKitContainer.tsx"],"sourcesContent":["import React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { Platform } from 'react-native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport Sendbird from '@sendbird/chat';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport type { HeaderStyleContextType, UIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport {\n  DialogProvider,\n  Header,\n  HeaderStyleProvider,\n  LightUIKitTheme,\n  ToastProvider,\n  UIKitThemeProvider,\n} from '@sendbird/uikit-react-native-foundation';\nimport type {\n  SendbirdChatSDK,\n  SendbirdGroupChannel,\n  SendbirdGroupChannelCreateParams,\n  SendbirdMember,\n  SendbirdUser,\n} from '@sendbird/uikit-utils';\nimport { NOOP, useIsFirstMount } from '@sendbird/uikit-utils';\n\nimport { LocalizationContext, LocalizationProvider } from '../contexts/LocalizationCtx';\nimport { PlatformServiceProvider } from '../contexts/PlatformServiceCtx';\nimport { ReactionProvider } from '../contexts/ReactionCtx';\nimport type { UIKitFeaturesInSendbirdChatContext } from '../contexts/SendbirdChatCtx';\nimport { SendbirdChatProvider } from '../contexts/SendbirdChatCtx';\nimport { UserProfileProvider } from '../contexts/UserProfileCtx';\nimport EmojiManager from '../libs/EmojiManager';\nimport type { ImageCompressionConfigInterface } from '../libs/ImageCompressionConfig';\nimport ImageCompressionConfig from '../libs/ImageCompressionConfig';\nimport InternalLocalCacheStorage from '../libs/InternalLocalCacheStorage';\nimport MentionConfig, { MentionConfigInterface } from '../libs/MentionConfig';\nimport MentionManager from '../libs/MentionManager';\nimport StringSetEn from '../localization/StringSet.en';\nimport type { StringSet } from '../localization/StringSet.type';\nimport SBUDynamicModule from '../platform/dynamicModule';\nimport type {\n  ClipboardServiceInterface,\n  FileServiceInterface,\n  MediaServiceInterface,\n  NotificationServiceInterface,\n} from '../platform/types';\nimport type { ErrorBoundaryProps, LocalCacheStorage } from '../types';\nimport VERSION from '../version';\nimport InternalErrorBoundaryContainer from './InternalErrorBoundaryContainer';\n\nconst NetInfo = SBUDynamicModule.get('@react-native-community/netinfo', 'warn');\n\nexport const SendbirdUIKit = Object.freeze({\n  VERSION,\n  PLATFORM: Platform.OS.toLowerCase(),\n  DEFAULT: {\n    AUTO_PUSH_TOKEN_REGISTRATION: true,\n    CHANNEL_LIST_TYPING_INDICATOR: false,\n    CHANNEL_LIST_MESSAGE_RECEIPT_STATUS: false,\n    USE_USER_ID_FOR_NICKNAME: false,\n    USER_MENTION: false,\n    IMAGE_COMPRESSION: true,\n    MESSAGE_SEARCH: false,\n  },\n});\n\nexport type SendbirdUIKitContainerProps = React.PropsWithChildren<{\n  appId: string;\n  platformServices: {\n    file: FileServiceInterface;\n    notification: NotificationServiceInterface;\n    clipboard: ClipboardServiceInterface;\n    media: MediaServiceInterface;\n  };\n  chatOptions?: {\n    localCacheStorage?: LocalCacheStorage;\n    onInitialized?: (sdkInstance: SendbirdChatSDK) => SendbirdChatSDK;\n  } & Partial<UIKitFeaturesInSendbirdChatContext>;\n  localization?: {\n    stringSet?: StringSet;\n  };\n  styles?: {\n    theme?: UIKitTheme;\n    statusBarTranslucent?: boolean;\n    defaultHeaderTitleAlign?: 'left' | 'center';\n    defaultHeaderHeight?: number;\n    HeaderComponent?: HeaderStyleContextType['HeaderComponent'];\n  };\n  errorBoundary?: {\n    disabled?: boolean;\n    onError?: (props: ErrorBoundaryProps) => void;\n    ErrorInfoComponent?: (props: ErrorBoundaryProps) => JSX.Element;\n  };\n  toast?: {\n    dismissTimeout?: number;\n  };\n  userProfile?: {\n    onCreateChannel: (channel: SendbirdGroupChannel) => void;\n    onBeforeCreateChannel?: (\n      channelParams: SendbirdGroupChannelCreateParams,\n      users: SendbirdUser[] | SendbirdMember[],\n    ) => SendbirdGroupChannelCreateParams | Promise<SendbirdGroupChannelCreateParams>;\n  };\n  userMention?: Pick<Partial<MentionConfigInterface>, 'mentionLimit' | 'suggestionLimit' | 'debounceMills'>;\n  imageCompression?: Partial<ImageCompressionConfigInterface>;\n}>;\n\nconst SendbirdUIKitContainer = ({\n  children,\n  appId,\n  chatOptions,\n  platformServices,\n  localization,\n  styles,\n  errorBoundary,\n  toast,\n  userProfile,\n  userMention,\n  imageCompression,\n}: SendbirdUIKitContainerProps) => {\n  const defaultStringSet = localization?.stringSet ?? StringSetEn;\n\n  const isFirstMount = useIsFirstMount();\n  const unsubscribes = useRef<Array<() => void>>([]);\n  const internalStorage = useMemo(\n    () => (chatOptions?.localCacheStorage ? new InternalLocalCacheStorage(chatOptions.localCacheStorage) : undefined),\n    [chatOptions?.localCacheStorage],\n  );\n\n  const [sdkInstance, setSdkInstance] = useState<SendbirdChatSDK>(() => {\n    const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n    unsubscribes.current = sendbird.unsubscribes;\n    return sendbird.chatSDK;\n  });\n\n  const emojiManager = useMemo(() => new EmojiManager(internalStorage), [internalStorage]);\n\n  const mentionManager = useMemo(() => {\n    const config = new MentionConfig({\n      mentionLimit: userMention?.mentionLimit || MentionConfig.DEFAULT.MENTION_LIMIT,\n      suggestionLimit: userMention?.suggestionLimit || MentionConfig.DEFAULT.SUGGESTION_LIMIT,\n      debounceMills: userMention?.debounceMills ?? MentionConfig.DEFAULT.DEBOUNCE_MILLS,\n      delimiter: MentionConfig.DEFAULT.DELIMITER,\n      trigger: MentionConfig.DEFAULT.TRIGGER,\n    });\n    return new MentionManager(config, chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION);\n  }, [\n    chatOptions?.enableUserMention,\n    userMention?.mentionLimit,\n    userMention?.suggestionLimit,\n    userMention?.debounceMills,\n  ]);\n\n  const imageCompressionConfig = useMemo(() => {\n    return new ImageCompressionConfig({\n      compressionRate: imageCompression?.compressionRate || ImageCompressionConfig.DEFAULT.COMPRESSION_RATE,\n      width: imageCompression?.width,\n      height: imageCompression?.height,\n    });\n  }, [imageCompression?.compressionRate, imageCompression?.width, imageCompression?.height]);\n\n  useLayoutEffect(() => {\n    if (!isFirstMount) {\n      const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n      setSdkInstance(sendbird.chatSDK);\n      unsubscribes.current = sendbird.unsubscribes;\n    }\n\n    return () => {\n      if (!isFirstMount) {\n        unsubscribes.current.forEach((u) => {\n          try {\n            u();\n          } catch {}\n        });\n      }\n    };\n  }, [appId, internalStorage]);\n\n  const renderChildren = () => {\n    if (errorBoundary?.disabled) {\n      return children;\n    } else {\n      return <InternalErrorBoundaryContainer {...errorBoundary}>{children}</InternalErrorBoundaryContainer>;\n    }\n  };\n\n  return (\n    <SafeAreaProvider>\n      <SendbirdChatProvider\n        sdkInstance={sdkInstance}\n        emojiManager={emojiManager}\n        mentionManager={mentionManager}\n        imageCompressionConfig={imageCompressionConfig}\n        enableAutoPushTokenRegistration={\n          chatOptions?.enableAutoPushTokenRegistration ?? SendbirdUIKit.DEFAULT.AUTO_PUSH_TOKEN_REGISTRATION\n        }\n        enableChannelListTypingIndicator={\n          chatOptions?.enableChannelListTypingIndicator ?? SendbirdUIKit.DEFAULT.CHANNEL_LIST_TYPING_INDICATOR\n        }\n        enableChannelListMessageReceiptStatus={\n          chatOptions?.enableChannelListMessageReceiptStatus ??\n          SendbirdUIKit.DEFAULT.CHANNEL_LIST_MESSAGE_RECEIPT_STATUS\n        }\n        enableUseUserIdForNickname={\n          chatOptions?.enableUseUserIdForNickname ?? SendbirdUIKit.DEFAULT.USE_USER_ID_FOR_NICKNAME\n        }\n        enableUserMention={chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION}\n        enableImageCompression={chatOptions?.enableImageCompression ?? SendbirdUIKit.DEFAULT.IMAGE_COMPRESSION}\n        enableMessageSearch={chatOptions?.enableMessageSearch ?? SendbirdUIKit.DEFAULT.MESSAGE_SEARCH}\n      >\n        <LocalizationProvider stringSet={defaultStringSet}>\n          <PlatformServiceProvider\n            fileService={platformServices.file}\n            notificationService={platformServices.notification}\n            clipboardService={platformServices.clipboard}\n            mediaService={platformServices.media}\n          >\n            <UIKitThemeProvider theme={styles?.theme ?? LightUIKitTheme}>\n              <HeaderStyleProvider\n                HeaderComponent={styles?.HeaderComponent ?? Header}\n                defaultTitleAlign={styles?.defaultHeaderTitleAlign ?? 'left'}\n                statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n              >\n                <ToastProvider dismissTimeout={toast?.dismissTimeout}>\n                  <UserProfileProvider\n                    onCreateChannel={userProfile?.onCreateChannel}\n                    onBeforeCreateChannel={userProfile?.onBeforeCreateChannel}\n                    statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n                  >\n                    <ReactionProvider>\n                      <LocalizationContext.Consumer>\n                        {(value) => {\n                          const STRINGS = value?.STRINGS || defaultStringSet;\n                          return (\n                            <DialogProvider\n                              defaultLabels={{\n                                alert: { ok: STRINGS.DIALOG.ALERT_DEFAULT_OK },\n                                prompt: {\n                                  ok: STRINGS.DIALOG.PROMPT_DEFAULT_OK,\n                                  cancel: STRINGS.DIALOG.PROMPT_DEFAULT_CANCEL,\n                                  placeholder: STRINGS.DIALOG.PROMPT_DEFAULT_PLACEHOLDER,\n                                },\n                              }}\n                            >\n                              {renderChildren()}\n                            </DialogProvider>\n                          );\n                        }}\n                      </LocalizationContext.Consumer>\n                    </ReactionProvider>\n                  </UserProfileProvider>\n                </ToastProvider>\n              </HeaderStyleProvider>\n            </UIKitThemeProvider>\n          </PlatformServiceProvider>\n        </LocalizationProvider>\n      </SendbirdChatProvider>\n    </SafeAreaProvider>\n  );\n};\n\nconst initializeSendbird = (\n  appId: string,\n  internalStorage?: InternalLocalCacheStorage,\n  onInitialized?: (sdk: SendbirdChatSDK) => SendbirdChatSDK,\n) => {\n  const unsubscribes: Array<() => void> = [];\n  let chatSDK: SendbirdChatSDK;\n\n  chatSDK = Sendbird.init({\n    appId,\n    modules: [new GroupChannelModule(), new OpenChannelModule()],\n    localCacheEnabled: Boolean(internalStorage),\n    useAsyncStorageStore: internalStorage as never,\n    newInstance: true,\n  });\n\n  if (onInitialized) {\n    chatSDK = onInitialized(chatSDK);\n  }\n\n  if (SendbirdUIKit.VERSION) {\n    chatSDK.addExtension('sb_uikit', SendbirdUIKit.VERSION);\n  }\n\n  if (SendbirdUIKit.PLATFORM) {\n    chatSDK.addExtension('device-os-platform', SendbirdUIKit.PLATFORM);\n  }\n\n  if (NetInfo?.addEventListener) {\n    try {\n      // NOTE: For removing buggy behavior of NetInfo.addEventListener\n      //  When you first add an event listener, it is assumed that the initialization of the internal event detector is done simultaneously.\n      //  In other words, when you call the first event listener two events are triggered immediately\n      //   - the one that is called when adding the event listener\n      //   - and the internal initialization event\n      NetInfo.addEventListener(NOOP)();\n    } catch {}\n\n    const listener = (callback: () => void, callbackType: 'online' | 'offline') => {\n      let callCount = 0;\n      const unsubscribe = NetInfo.addEventListener((state) => {\n        const online = Boolean(state.isConnected) || Boolean(state.isInternetReachable);\n\n        // NOTE: When NetInfo.addEventListener is called\n        //  the event is immediately triggered regardless of whether the event actually occurred.\n        //  This is why it filters the first event.\n        if (callCount === 0) {\n          callCount++;\n          return;\n        }\n\n        if (online && callbackType === 'online') callback();\n        if (!online && callbackType === 'offline') callback();\n      });\n      unsubscribes.push(unsubscribe);\n      return unsubscribe;\n    };\n    chatSDK.setOnlineListener?.((onOnline) => listener(onOnline, 'online'));\n    chatSDK.setOfflineListener?.((onOffline) => listener(onOffline, 'offline'));\n  }\n  return { chatSDK, unsubscribes };\n};\n\nexport default SendbirdUIKitContainer;\n"],"mappings":"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"}