{"version":3,"names":["_react","_interopRequireDefault","require","_uikitChatHooks","_uikitUtils","_StatusComposition","_GroupChannelPreviewContainer","_createGroupChannelListModule","_useContext","obj","__esModule","default","createGroupChannelListFragment","initModule","GroupChannelListModule","createGroupChannelListModule","_ref","onPressChannel","onPressCreateChannel","queryCreator","collectionCreator","renderGroupChannelPreview","skipTypeSelection","flatListProps","menuItemCreator","PASS","sdk","currentUser","features","markAsDeliveredWithChannel","useSendbirdChat","groupChannels","next","loading","useGroupChannelList","userId","enableCollectionWithoutLocalCache","deliveryReceiptEnabled","useAppState","status","forEach","_renderGroupChannelPreview","useFreshCallback","channel","onLongPressChannel","createElement","onPress","onLongPress","isChannelTypeAvailable","broadcastChannelEnabled","superGroupChannelEnabled","Provider","Header","LoadingComponent","StatusLoading","List","onLoadNext","ListEmptyComponent","StatusEmpty","contentContainerStyle","flexGrow","TypeSelector","onSelectType","_default","exports"],"sources":["createGroupChannelListFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useGroupChannelList } from '@sendbird/uikit-chat-hooks';\nimport { PASS, useAppState, useFreshCallback } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport GroupChannelPreviewContainer from '../containers/GroupChannelPreviewContainer';\nimport createGroupChannelListModule from '../domain/groupChannelList/module/createGroupChannelListModule';\nimport type {\n  GroupChannelListFragment,\n  GroupChannelListModule,\n  GroupChannelListProps,\n} from '../domain/groupChannelList/types';\nimport { useSendbirdChat } from '../hooks/useContext';\n\nconst createGroupChannelListFragment = (initModule?: Partial<GroupChannelListModule>): GroupChannelListFragment => {\n  const GroupChannelListModule = createGroupChannelListModule(initModule);\n  return ({\n    onPressChannel,\n    onPressCreateChannel,\n    queryCreator,\n    collectionCreator,\n    renderGroupChannelPreview,\n    skipTypeSelection = false,\n    flatListProps = {},\n    menuItemCreator = PASS,\n  }) => {\n    const { sdk, currentUser, features, markAsDeliveredWithChannel } = useSendbirdChat();\n    const { groupChannels, next, loading } = useGroupChannelList(sdk, currentUser?.userId, {\n      queryCreator,\n      collectionCreator,\n      enableCollectionWithoutLocalCache: !queryCreator,\n    });\n\n    if (features.deliveryReceiptEnabled) {\n      useAppState('change', (status) => {\n        if (status === 'active') groupChannels.forEach(markAsDeliveredWithChannel);\n      });\n    }\n\n    const _renderGroupChannelPreview: GroupChannelListProps['List']['renderGroupChannelPreview'] = useFreshCallback(\n      (channel, onLongPressChannel) => {\n        if (renderGroupChannelPreview) return renderGroupChannelPreview(channel, onLongPressChannel);\n        return (\n          <GroupChannelPreviewContainer\n            channel={channel}\n            onPress={() => onPressChannel(channel)}\n            onLongPress={() => onLongPressChannel()}\n          />\n        );\n      },\n    );\n\n    const isChannelTypeAvailable = features.broadcastChannelEnabled || features.superGroupChannelEnabled;\n\n    return (\n      <GroupChannelListModule.Provider>\n        <GroupChannelListModule.Header />\n        <StatusComposition loading={loading} LoadingComponent={<GroupChannelListModule.StatusLoading />}>\n          <GroupChannelListModule.List\n            menuItemCreator={menuItemCreator}\n            renderGroupChannelPreview={_renderGroupChannelPreview}\n            groupChannels={groupChannels}\n            onLoadNext={next}\n            flatListProps={{\n              ListEmptyComponent: <GroupChannelListModule.StatusEmpty />,\n              contentContainerStyle: { flexGrow: 1 },\n              ...flatListProps,\n            }}\n          />\n        </StatusComposition>\n        <GroupChannelListModule.TypeSelector\n          skipTypeSelection={isChannelTypeAvailable ? skipTypeSelection : true}\n          onSelectType={onPressCreateChannel}\n        />\n      </GroupChannelListModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelListFragment;\n"],"mappings":"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"}