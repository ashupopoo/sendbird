{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_uikitReactNativeFoundation","_uikitUtils","_constants","_useContext","_ReactionAddons","_AdminMessage","_FileMessage","_MessageContainer","_MessageDateSeparator","_MessageIncomingAvatar","_MessageIncomingSenderName","_MessageOutgoingStatus","_MessageTime","_UnknownMessage","_UserMessage","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","MessageRenderer","_ref","currentUserId","channel","message","onPress","onLongPress","rest","variant","isMyMessage","isOutgoing","isIncoming","variantContainerStyle","incoming","styles","chatIncoming","outgoing","chatOutgoing","groupWithPrev","groupWithNext","calcMessageGrouping","Boolean","enableMessageGrouping","prevMessage","nextMessage","features","useSendbirdChat","reactionChildren","useIIFE","shouldRenderReaction","reactionEnabled","reactions","createElement","ReactionAddons","Message","messageComponent","pressableProps","style","msgContainer","disabled","delayLongPress","DEFAULT_LONG_PRESS_DELAY","messageProps","isUserMessage","Pressable","_ref2","pressed","onLongPressURL","onLongPressMentionedUser","isFileMessage","_ref3","isAdminMessage","_ref4","View","conditionChaining","chatGroup","chatNonGroup","chatLastMessage","outgoingContainer","grouping","timeOutgoing","bubbleContainer","bubbleWrapper","timeIncoming","createStyleSheet","flexDirection","justifyContent","alignItems","marginLeft","marginRight","marginBottom","maxWidth","flexShrink","_default","React","memo","exports"],"sources":["index.tsx"],"sourcesContent":["import React from 'react';\nimport { Pressable, PressableProps, View } from 'react-native';\n\nimport { createStyleSheet } from '@sendbird/uikit-react-native-foundation';\nimport type { SendbirdMessage } from '@sendbird/uikit-utils';\nimport {\n  calcMessageGrouping,\n  conditionChaining,\n  isMyMessage,\n  shouldRenderReaction,\n  useIIFE,\n} from '@sendbird/uikit-utils';\n\nimport { DEFAULT_LONG_PRESS_DELAY } from '../../constants';\nimport type { GroupChannelProps } from '../../domain/groupChannel/types';\nimport { useSendbirdChat } from '../../hooks/useContext';\nimport { ReactionAddons } from '../ReactionAddons';\nimport AdminMessage from './AdminMessage';\nimport FileMessage from './FileMessage';\nimport MessageContainer from './MessageContainer';\nimport MessageDateSeparator from './MessageDateSeparator';\nimport MessageIncomingAvatar from './MessageIncomingAvatar';\nimport MessageIncomingSenderName from './MessageIncomingSenderName';\nimport MessageOutgoingStatus from './MessageOutgoingStatus';\nimport MessageTime from './MessageTime';\nimport UnknownMessage from './UnknownMessage';\nimport UserMessage from './UserMessage';\n\ntype MessageStyleVariant = 'outgoing' | 'incoming';\nexport type MessageRendererInterface<T = SendbirdMessage, AdditionalProps = unknown> = {\n  message: T;\n  prevMessage?: SendbirdMessage;\n  nextMessage?: SendbirdMessage;\n  variant: MessageStyleVariant;\n  groupWithPrev: boolean;\n  groupWithNext: boolean;\n  pressed: boolean;\n  children?: React.ReactElement | null;\n} & AdditionalProps;\n\nconst MessageRenderer: GroupChannelProps['Fragment']['renderMessage'] = ({\n  currentUserId,\n  channel,\n  message,\n  onPress,\n  onLongPress,\n  ...rest\n}) => {\n  const variant: MessageStyleVariant = isMyMessage(message, currentUserId) ? 'outgoing' : 'incoming';\n  const isOutgoing = variant === 'outgoing';\n  const isIncoming = variant === 'incoming';\n  const variantContainerStyle = { incoming: styles.chatIncoming, outgoing: styles.chatOutgoing }[variant];\n\n  const { groupWithPrev, groupWithNext } = calcMessageGrouping(\n    Boolean(rest.enableMessageGrouping),\n    message,\n    rest.prevMessage,\n    rest.nextMessage,\n  );\n\n  const { features } = useSendbirdChat();\n\n  const reactionChildren = useIIFE(() => {\n    if (shouldRenderReaction(channel, features.reactionEnabled) && message.reactions && message.reactions.length > 0) {\n      return <ReactionAddons.Message channel={channel} message={message} />;\n    }\n    return null;\n  });\n\n  const messageComponent = useIIFE(() => {\n    const pressableProps: PressableProps = {\n      style: styles.msgContainer,\n      disabled: !onPress && !onLongPress,\n      onPress,\n      onLongPress,\n      delayLongPress: DEFAULT_LONG_PRESS_DELAY,\n    };\n    const messageProps = { ...rest, variant, groupWithNext, groupWithPrev };\n\n    if (message.isUserMessage()) {\n      return (\n        <Pressable {...pressableProps}>\n          {({ pressed }) => (\n            <UserMessage\n              message={message}\n              pressed={pressed}\n              onLongPressURL={onLongPress}\n              onLongPressMentionedUser={onLongPress}\n              {...messageProps}\n            >\n              {reactionChildren}\n            </UserMessage>\n          )}\n        </Pressable>\n      );\n    }\n\n    if (message.isFileMessage()) {\n      return (\n        <Pressable {...pressableProps}>\n          {({ pressed }) => (\n            <FileMessage message={message} pressed={pressed} {...messageProps}>\n              {reactionChildren}\n            </FileMessage>\n          )}\n        </Pressable>\n      );\n    }\n\n    if (message.isAdminMessage()) {\n      return <AdminMessage message={message} pressed={false} {...messageProps} />;\n    }\n\n    return (\n      <Pressable {...pressableProps}>\n        {({ pressed }) => <UnknownMessage message={message} pressed={pressed} {...messageProps} />}\n      </Pressable>\n    );\n  });\n\n  return (\n    <MessageContainer>\n      <MessageDateSeparator message={message} prevMessage={rest.prevMessage} />\n      {message.isAdminMessage() && messageComponent}\n      {!message.isAdminMessage() && (\n        <View\n          style={[\n            variantContainerStyle,\n            conditionChaining(\n              [groupWithNext, Boolean(rest.nextMessage)],\n              [styles.chatGroup, styles.chatNonGroup, styles.chatLastMessage],\n            ),\n          ]}\n        >\n          {isOutgoing && (\n            <View style={styles.outgoingContainer}>\n              <MessageOutgoingStatus channel={channel} message={message} />\n              <MessageTime message={message} grouping={groupWithNext} style={styles.timeOutgoing} />\n            </View>\n          )}\n          {isIncoming && <MessageIncomingAvatar message={message} grouping={groupWithNext} />}\n          <View style={styles.bubbleContainer}>\n            {isIncoming && <MessageIncomingSenderName message={message} grouping={groupWithPrev} />}\n            <View style={styles.bubbleWrapper}>\n              {messageComponent}\n              {isIncoming && <MessageTime message={message} grouping={groupWithNext} style={styles.timeIncoming} />}\n            </View>\n          </View>\n        </View>\n      )}\n    </MessageContainer>\n  );\n};\n\nconst styles = createStyleSheet({\n  chatIncoming: {\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end',\n  },\n  chatOutgoing: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n  },\n  timeIncoming: {\n    marginLeft: 4,\n  },\n  timeOutgoing: {\n    marginRight: 4,\n  },\n  chatGroup: {\n    marginBottom: 2,\n  },\n  chatNonGroup: {\n    marginBottom: 16,\n  },\n  chatLastMessage: {\n    marginBottom: 16,\n  },\n  msgContainer: {\n    maxWidth: 240,\n  },\n  bubbleContainer: {\n    flexShrink: 1,\n  },\n  bubbleWrapper: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n  },\n  outgoingContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n  },\n});\n\nexport default React.memo(MessageRenderer);\n"],"mappings":"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"}