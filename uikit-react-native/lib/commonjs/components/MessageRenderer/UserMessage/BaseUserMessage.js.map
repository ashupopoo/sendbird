{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_uikitReactNativeFoundation","_uikitUtils","_useContext","_SBUUtils","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","BaseUserMessage","_ref","message","variant","pressed","children","onLongPressMentionedUser","onLongPressURL","mentionManager","currentUser","useSendbirdChat","show","useUserProfile","STRINGS","useLocalization","colors","palette","useUIKitTheme","color","ui","groupChannelMessage","createElement","View","style","styles","container","backgroundColor","background","wrapper","Text","body3","textMsg","RegexText","patterns","regex","templateRegex","replacer","_ref2","_message$mentionedUse","match","groups","parentProps","index","keyPrefix","user","mentionedUsers","find","it","userId","onPress","onLongPress","fontWeight","highlight","asMentionedMessageText","urlRegexStrict","_ref3","SBUUtils","openURL","textDecorationLine","shouldUseMentionedMessageTemplate","mentionedMessageTemplate","Boolean","updatedAt","textEdited","GROUP_CHANNEL","MESSAGE_BUBBLE_EDITED_POSTFIX","createStyleSheet","borderRadius","overflow","paddingHorizontal","paddingVertical","_default","exports"],"sources":["BaseUserMessage.tsx"],"sourcesContent":["import React from 'react';\nimport { View } from 'react-native';\n\nimport { RegexText, Text, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { urlRegexStrict } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat, useUserProfile } from '../../../hooks/useContext';\nimport SBUUtils from '../../../libs/SBUUtils';\nimport type { UserMessageProps } from './index';\n\nconst BaseUserMessage = ({\n  message,\n  variant,\n  pressed,\n  children,\n  onLongPressMentionedUser,\n  onLongPressURL,\n}: UserMessageProps) => {\n  const { mentionManager, currentUser } = useSendbirdChat();\n  const { show } = useUserProfile();\n  const { STRINGS } = useLocalization();\n  const { colors, palette } = useUIKitTheme();\n\n  const color = colors.ui.groupChannelMessage[variant][pressed ? 'pressed' : 'enabled'];\n\n  return (\n    <View style={[styles.container, { backgroundColor: color.background }]}>\n      <View style={styles.wrapper}>\n        <Text body3 color={color.textMsg}>\n          <RegexText\n            body3\n            color={color.textMsg}\n            patterns={[\n              {\n                regex: mentionManager.templateRegex,\n                replacer({ match, groups, parentProps, index, keyPrefix }) {\n                  const user = message.mentionedUsers?.find((it) => it.userId === groups[2]);\n                  if (user) {\n                    return (\n                      <Text\n                        {...parentProps}\n                        key={`${keyPrefix}-${index}`}\n                        onPress={() => show(user)}\n                        onLongPress={onLongPressMentionedUser}\n                        style={[\n                          parentProps?.style,\n                          { fontWeight: 'bold' },\n                          user.userId === currentUser?.userId && { backgroundColor: palette.highlight },\n                        ]}\n                      >\n                        {`${mentionManager.asMentionedMessageText(user)}`}\n                      </Text>\n                    );\n                  }\n                  return match;\n                },\n              },\n              {\n                regex: urlRegexStrict,\n                replacer({ match, parentProps, index, keyPrefix }) {\n                  return (\n                    <Text\n                      {...parentProps}\n                      key={`${keyPrefix}-${index}`}\n                      onPress={() => SBUUtils.openURL(match)}\n                      onLongPress={onLongPressURL}\n                      style={[parentProps?.style, { textDecorationLine: 'underline' }]}\n                    >\n                      {match}\n                    </Text>\n                  );\n                },\n              },\n            ]}\n          >\n            {mentionManager.shouldUseMentionedMessageTemplate(message)\n              ? message.mentionedMessageTemplate\n              : message.message}\n          </RegexText>\n          {Boolean(message.updatedAt) && (\n            <Text body3 color={color.textEdited}>\n              {STRINGS.GROUP_CHANNEL.MESSAGE_BUBBLE_EDITED_POSTFIX}\n            </Text>\n          )}\n        </Text>\n      </View>\n      {children}\n    </View>\n  );\n};\nconst styles = createStyleSheet({\n  container: {\n    borderRadius: 16,\n    overflow: 'hidden',\n  },\n  wrapper: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n  },\n});\n\nexport default BaseUserMessage;\n"],"mappings":"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"}