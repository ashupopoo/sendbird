{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_message","_uikitReactNativeFoundation","_uikitUtils","_useContext","_SBUError","_interopRequireDefault","_SBUUtils","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","SendInput","forwardRef","_ref","ref","onPressSendUserMessage","onPressSendFileMessage","onSendUserMessage","onSendFileMessage","text","onChangeText","onSelectionChange","mentionedUsers","inputDisabled","inputFrozen","inputMuted","mentionManager","imageCompressionConfig","features","useSendbirdChat","STRINGS","useLocalization","fileService","mediaService","usePlatformService","colors","useUIKitTheme","openSheet","useBottomSheet","alert","useAlert","toast","useToast","sendUserMessage","mentionType","MentionType","USERS","mentionedUserIds","map","it","user","userId","mentionedMessageTemplate","textToMentionedMessageTemplate","message","catch","onFailureToSend","type","userIds","messageTemplate","sendFileMessage","file","show","TOAST","SEND_MSG_ERROR","onPressAttachment","sheetItems","title","LABELS","CHANNEL_INPUT_ATTACHMENT_CAMERA","icon","onPress","mediaFile","openCamera","mediaType","onOpenFailure","error","code","SBUError","CODE","ERR_PERMISSIONS_DENIED","DIALOG","ALERT_PERMISSIONS_TITLE","ALERT_PERMISSIONS_MESSAGE","PERMISSION_CAMERA","PERMISSION_APP_NAME","buttons","ALERT_PERMISSIONS_OK","SBUUtils","openSettings","OPEN_CAMERA_ERROR","isImage","uri","shouldCompressImage","imageCompressionEnabled","safeRun","compressed","compressImage","maxWidth","width","maxHeight","height","compressionRate","size","CHANNEL_INPUT_ATTACHMENT_PHOTO_LIBRARY","mediaFiles","openMediaLibrary","selectionLimit","PERMISSION_DEVICE_STORAGE","OPEN_PHOTO_LIBRARY_ERROR","CHANNEL_INPUT_ATTACHMENT_FILES","documentFile","openDocument","OPEN_FILES_ERROR","getPlaceholder","CHANNEL_INPUT_PLACEHOLDER_ACTIVE","CHANNEL_INPUT_PLACEHOLDER_DISABLED","CHANNEL_INPUT_PLACEHOLDER_MUTED","createElement","View","style","styles","sendInputContainer","TouchableOpacity","disabled","Icon","color","ui","input","highlight","active","containerStyle","iconAttach","TextInput","multiline","disableFullscreenUI","editable","placeholder","textToMentionedComponents","Boolean","trim","iconSend","createStyleSheet","paddingVertical","paddingHorizontal","alignItems","flexDirection","flex","marginRight","minHeight","Platform","select","ios","borderRadius","padding","marginLeft","_default","exports"],"sources":["SendInput.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport {\n  NativeSyntheticEvent,\n  Platform,\n  TextInput as RNTextInput,\n  TextInputSelectionChangeEventData,\n  TouchableOpacity,\n  View,\n} from 'react-native';\n\nimport { MentionType } from '@sendbird/chat/message';\nimport {\n  Icon,\n  TextInput,\n  createStyleSheet,\n  useAlert,\n  useBottomSheet,\n  useToast,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { isImage, shouldCompressImage } from '@sendbird/uikit-utils';\n\nimport { useLocalization, usePlatformService, useSendbirdChat } from '../../hooks/useContext';\nimport SBUError from '../../libs/SBUError';\nimport SBUUtils from '../../libs/SBUUtils';\nimport type { FileType } from '../../platform/types';\nimport type { MentionedUser } from '../../types';\nimport type { ChannelInputProps } from './index';\n\ninterface SendInputProps extends ChannelInputProps {\n  text: string;\n  onChangeText: (val: string) => void;\n  onSelectionChange: (e: NativeSyntheticEvent<TextInputSelectionChangeEventData>) => void;\n  mentionedUsers: MentionedUser[];\n}\n\nconst SendInput = forwardRef<RNTextInput, SendInputProps>(function SendInput(\n  {\n    onPressSendUserMessage,\n    onPressSendFileMessage,\n    onSendUserMessage,\n    onSendFileMessage,\n    text,\n    onChangeText,\n    onSelectionChange,\n    mentionedUsers,\n    inputDisabled,\n    inputFrozen,\n    inputMuted,\n  },\n  ref,\n) {\n  const { mentionManager, imageCompressionConfig, features } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { fileService, mediaService } = usePlatformService();\n  const { colors } = useUIKitTheme();\n  const { openSheet } = useBottomSheet();\n  const { alert } = useAlert();\n  const toast = useToast();\n\n  const sendUserMessage = () => {\n    const mentionType = MentionType.USERS;\n    const mentionedUserIds = mentionedUsers.map((it) => it.user.userId);\n    const mentionedMessageTemplate = mentionManager.textToMentionedMessageTemplate(text, mentionedUsers);\n\n    if (onPressSendUserMessage) {\n      onPressSendUserMessage({\n        message: text,\n        mentionType,\n        mentionedUserIds,\n        mentionedMessageTemplate,\n      }).catch(onFailureToSend);\n    } else if (onSendUserMessage) {\n      onSendUserMessage(text, {\n        type: mentionType,\n        userIds: mentionedUserIds,\n        messageTemplate: mentionedMessageTemplate,\n      }).catch(onFailureToSend);\n    }\n\n    onChangeText('');\n  };\n\n  const sendFileMessage = (file: FileType) => {\n    if (onPressSendFileMessage) {\n      onPressSendFileMessage({ file }).catch(onFailureToSend);\n    } else if (onSendFileMessage) {\n      onSendFileMessage(file).catch(onFailureToSend);\n    }\n  };\n\n  const onFailureToSend = () => toast.show(STRINGS.TOAST.SEND_MSG_ERROR, 'error');\n\n  const onPressAttachment = () => {\n    openSheet({\n      sheetItems: [\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_CAMERA,\n          icon: 'camera',\n          onPress: async () => {\n            const mediaFile = await fileService.openCamera({\n              mediaType: 'all',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_CAMERA,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_CAMERA_ERROR, 'error');\n                }\n              },\n            });\n\n            if (mediaFile) {\n              // Image compression\n              if (\n                isImage(mediaFile.uri, mediaFile.type) &&\n                shouldCompressImage(mediaFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: mediaFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    mediaFile.uri = compressed.uri;\n                    mediaFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(mediaFile);\n            }\n          },\n        },\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_PHOTO_LIBRARY,\n          icon: 'photo',\n          onPress: async () => {\n            const mediaFiles = await fileService.openMediaLibrary({\n              selectionLimit: 1,\n              mediaType: 'all',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_DEVICE_STORAGE,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_PHOTO_LIBRARY_ERROR, 'error');\n                }\n              },\n            });\n\n            if (mediaFiles && mediaFiles[0]) {\n              const mediaFile = mediaFiles[0];\n\n              // Image compression\n              if (\n                isImage(mediaFile.uri, mediaFile.type) &&\n                shouldCompressImage(mediaFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: mediaFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    mediaFile.uri = compressed.uri;\n                    mediaFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(mediaFile);\n            }\n          },\n        },\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_FILES,\n          icon: 'document',\n          onPress: async () => {\n            const documentFile = await fileService.openDocument({\n              onOpenFailure: () => toast.show(STRINGS.TOAST.OPEN_FILES_ERROR, 'error'),\n            });\n\n            if (documentFile) {\n              // Image compression\n              if (\n                isImage(documentFile.uri, documentFile.type) &&\n                shouldCompressImage(documentFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: documentFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    documentFile.uri = compressed.uri;\n                    documentFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(documentFile);\n            }\n          },\n        },\n      ],\n    });\n  };\n\n  const getPlaceholder = () => {\n    if (!inputDisabled) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_ACTIVE;\n    if (inputFrozen) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n    if (inputMuted) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_MUTED;\n\n    return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n  };\n\n  return (\n    <View style={styles.sendInputContainer}>\n      <TouchableOpacity onPress={onPressAttachment} disabled={inputDisabled}>\n        <Icon\n          color={inputDisabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight}\n          icon={'add'}\n          size={24}\n          containerStyle={styles.iconAttach}\n        />\n      </TouchableOpacity>\n      <TextInput\n        ref={ref}\n        multiline\n        disableFullscreenUI\n        onSelectionChange={onSelectionChange}\n        editable={!inputDisabled}\n        onChangeText={onChangeText}\n        style={styles.input}\n        placeholder={getPlaceholder()}\n      >\n        {mentionManager.textToMentionedComponents(text, mentionedUsers)}\n      </TextInput>\n\n      {Boolean(text.trim()) && (\n        <TouchableOpacity onPress={sendUserMessage} disabled={inputDisabled}>\n          <Icon\n            color={\n              inputDisabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight\n            }\n            icon={'send'}\n            size={24}\n            containerStyle={styles.iconSend}\n          />\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n});\n\nconst styles = createStyleSheet({\n  sendInputContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  input: {\n    flex: 1,\n    marginRight: 4,\n    minHeight: 36,\n    maxHeight: 36 * Platform.select({ ios: 2.5, default: 2 }),\n    borderRadius: 20,\n  },\n  iconAttach: {\n    marginRight: 8,\n    padding: 4,\n  },\n  iconSend: {\n    marginLeft: 4,\n    padding: 4,\n  },\n});\n\nexport default SendInput;\n"],"mappings":"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"}