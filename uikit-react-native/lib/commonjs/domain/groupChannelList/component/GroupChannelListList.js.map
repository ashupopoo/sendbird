{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeSafeAreaContext","_chat","_uikitReactNativeFoundation","_uikitUtils","_useContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","GroupChannelListList","_ref","renderGroupChannelPreview","groupChannels","onLoadNext","flatListProps","menuItemCreator","PASS","toast","useToast","openMenu","useActionMenu","STRINGS","useLocalization","sdk","currentUser","useSendbirdChat","onLongPress","useFreshCallback","channel","action","myPushTriggerOption","menuItem","title","GROUP_CHANNEL_LIST","DIALOG_CHANNEL_TITLE","userId","menuItems","DIALOG_CHANNEL_NOTIFICATION","onPress","setMyPushTriggerOption","PushTriggerOption","DEFAULT","OFF","onError","show","TOAST","TURN_ON_NOTIFICATIONS_ERROR","TURN_OFF_NOTIFICATIONS_ERROR","DIALOG_CHANNEL_LEAVE","leave","then","clearCachedMessages","url","catch","NOOP","LEAVE_CHANNEL_ERROR","renderItem","useCallback","_ref2","item","left","right","useSafeAreaInsets","createElement","FlatList","bounces","data","onEndReached","contentContainerStyle","paddingLeft","paddingRight","keyExtractor","getChannelUniqId","_default","exports"],"sources":["GroupChannelListList.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { FlatList, ListRenderItem } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport { useActionMenu, useToast } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, PASS, SendbirdGroupChannel, getChannelUniqId, useFreshCallback } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { GroupChannelListProps } from '../types';\n\nconst GroupChannelListList = ({\n  renderGroupChannelPreview,\n  groupChannels,\n  onLoadNext,\n  flatListProps,\n  menuItemCreator = PASS,\n}: GroupChannelListProps['List']) => {\n  const toast = useToast();\n  const { openMenu } = useActionMenu();\n  const { STRINGS } = useLocalization();\n  const { sdk, currentUser } = useSendbirdChat();\n\n  const onLongPress = useFreshCallback((channel: SendbirdGroupChannel) => {\n    const action = channel.myPushTriggerOption === 'off' ? 'on' : 'off';\n    const menuItem = menuItemCreator({\n      title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_TITLE(currentUser?.userId ?? '', channel),\n      menuItems: [\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_NOTIFICATION(channel),\n          onPress: async () => {\n            if (action === 'on') {\n              await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n            } else {\n              await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n            }\n          },\n          onError: () => {\n            toast.show(\n              action === 'on' ? STRINGS.TOAST.TURN_ON_NOTIFICATIONS_ERROR : STRINGS.TOAST.TURN_OFF_NOTIFICATIONS_ERROR,\n              'error',\n            );\n          },\n        },\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_LEAVE,\n          onPress: async () => {\n            channel.leave().then(() => sdk.clearCachedMessages([channel.url]).catch(NOOP));\n          },\n          onError: () => toast.show(STRINGS.TOAST.LEAVE_CHANNEL_ERROR, 'error'),\n        },\n      ],\n    });\n\n    openMenu(menuItem);\n  });\n\n  const renderItem: ListRenderItem<SendbirdGroupChannel> = useCallback(\n    ({ item }) => renderGroupChannelPreview?.(item, () => onLongPress(item)),\n    [renderGroupChannelPreview, onLongPress],\n  );\n\n  const { left, right } = useSafeAreaInsets();\n  return (\n    <FlatList\n      bounces={false}\n      data={groupChannels}\n      renderItem={renderItem}\n      onEndReached={onLoadNext}\n      {...flatListProps}\n      contentContainerStyle={[flatListProps?.contentContainerStyle, { paddingLeft: left, paddingRight: right }]}\n      keyExtractor={getChannelUniqId}\n    />\n  );\n};\n\nexport default GroupChannelListList;\n"],"mappings":"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"}