{"version":3,"names":["_react","_interopRequireWildcard","require","_uikitChatHooks","_uikitUtils","_ProviderLayout","_interopRequireDefault","_useContext","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","GroupChannelContexts","Fragment","createContext","headerTitle","channel","setMessageToEdit","NOOP","TypingIndicator","typingUsers","PubSub","publish","subscribe","exports","GroupChannelContextsProvider","_ref","children","enableTypingIndicator","keyboardAvoidOffset","groupChannelPubSub","Error","handlerId","useUniqHandlerId","STRINGS","useLocalization","currentUser","sdk","useSendbirdChat","setTypingUsers","useState","messageToEdit","useChannelHandler","onTypingStatusUpdated","eventChannel","isDifferentChannel","getTypingUsers","createElement","Provider","value","GROUP_CHANNEL","HEADER_TITLE","userId"],"sources":["moduleContext.tsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport {\n  NOOP,\n  SendbirdFileMessage,\n  SendbirdGroupChannel,\n  SendbirdUser,\n  SendbirdUserMessage,\n  isDifferentChannel,\n  useUniqHandlerId,\n} from '@sendbird/uikit-utils';\n\nimport ProviderLayout from '../../../components/ProviderLayout';\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { PubSub } from '../../../utils/pubsub';\nimport type { GroupChannelContextsType, GroupChannelModule, GroupChannelPubSubContextPayload } from '../types';\n\nexport const GroupChannelContexts: GroupChannelContextsType = {\n  Fragment: createContext({\n    headerTitle: '',\n    channel: {} as SendbirdGroupChannel,\n    setMessageToEdit: NOOP,\n  }),\n  TypingIndicator: createContext({\n    typingUsers: [] as SendbirdUser[],\n  }),\n  PubSub: createContext({\n    publish: NOOP,\n    subscribe: () => NOOP,\n  } as PubSub<GroupChannelPubSubContextPayload>),\n};\n\nexport const GroupChannelContextsProvider: GroupChannelModule['Provider'] = ({\n  children,\n  channel,\n  enableTypingIndicator,\n  keyboardAvoidOffset = 0,\n  groupChannelPubSub,\n}) => {\n  if (!channel) throw new Error('GroupChannel is not provided to GroupChannelModule');\n\n  const handlerId = useUniqHandlerId('GroupChannelContextsProvider');\n  const { STRINGS } = useLocalization();\n  const { currentUser, sdk } = useSendbirdChat();\n\n  const [typingUsers, setTypingUsers] = useState<SendbirdUser[]>([]);\n  const [messageToEdit, setMessageToEdit] = useState<SendbirdUserMessage | SendbirdFileMessage>();\n\n  useChannelHandler(sdk, handlerId, {\n    onTypingStatusUpdated(eventChannel) {\n      if (isDifferentChannel(channel, eventChannel)) return;\n      if (!enableTypingIndicator) return;\n      setTypingUsers(eventChannel.getTypingUsers());\n    },\n  });\n\n  return (\n    <ProviderLayout>\n      <GroupChannelContexts.Fragment.Provider\n        value={{\n          headerTitle: STRINGS.GROUP_CHANNEL.HEADER_TITLE(currentUser?.userId ?? '', channel),\n          channel,\n          messageToEdit,\n          setMessageToEdit,\n          keyboardAvoidOffset,\n        }}\n      >\n        <GroupChannelContexts.TypingIndicator.Provider value={{ typingUsers }}>\n          <GroupChannelContexts.PubSub.Provider value={groupChannelPubSub}>\n            {children}\n          </GroupChannelContexts.PubSub.Provider>\n        </GroupChannelContexts.TypingIndicator.Provider>\n      </GroupChannelContexts.Fragment.Provider>\n    </ProviderLayout>\n  );\n};\n"],"mappings":"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"}