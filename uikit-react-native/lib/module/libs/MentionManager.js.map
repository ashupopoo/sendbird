{"version":3,"names":["React","Text","createStyleSheet","createMentionTemplateRegex","replaceWithRegex","MentionManager","constructor","config","mentionEnabled","_this","_defineProperty","inRangeUnderOver","start","num","end","inRangeUnderMore","inRangeLessOver","inRangeLessMore","overlaps","a","b","compare","arguments","length","undefined","inRange","underOver","underMore","lessOver","lessMore","text","selectionIndex","lastSpan","slice","split","delimiter","pop","triggerIdx","indexOf","trigger","mentionSpan","searchString","isTriggered","startsWith","isValidSearchString","_invalidStartsKeywords","every","it","offset","mentionedUsers","map","range","selection","lastSelection","removedOffset","filtered","filter","shouldRemove","rangeHelpers","Math","max","user","userId","nickname","leftText","components","sort","reduce","_ref","curr","currentIndex","leftSpan","rightSpan","createElement","key","style","styles","mentionedText","strings","_ref2","templateSpan","asMentionedMessageTemplate","join","template","actualMentionedUsers","offsetToMove","templateRegex","_ref3","match","matchIndex","groups","find","userIdSpan","userNicknameSpan","asMentionedMessageText","offsetAfterConverted","originalRange","convertedRange","push","message","Boolean","mentionedMessageTemplate","_templateRegex","fontWeight"],"sources":["MentionManager.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Text, createStyleSheet } from '@sendbird/uikit-react-native-foundation';\nimport type { SendbirdFileMessage, SendbirdUser, SendbirdUserMessage } from '@sendbird/uikit-utils';\nimport { createMentionTemplateRegex, replaceWithRegex } from '@sendbird/uikit-utils';\n\nimport type { MentionedUser, Range } from '../types';\nimport type { MentionConfigInterface } from './MentionConfig';\n\nclass MentionManager {\n  private _invalidStartsKeywords: string[];\n  private _templateRegex: RegExp;\n\n  constructor(public config: MentionConfigInterface, public mentionEnabled: boolean) {\n    this._invalidStartsKeywords = [this.config.trigger, this.config.delimiter];\n    this._templateRegex = createMentionTemplateRegex(this.config.trigger);\n  }\n\n  public rangeHelpers = {\n    inRangeUnderOver(start: number, num: number, end: number) {\n      return start < num && num < end;\n    },\n    inRangeUnderMore(start: number, num: number, end: number) {\n      return start < num && num <= end;\n    },\n    inRangeLessOver(start: number, num: number, end: number) {\n      return start <= num && num < end;\n    },\n    inRangeLessMore(start: number, num: number, end: number) {\n      return start <= num && num <= end;\n    },\n    overlaps(a: Range, b: Range, compare: 'underOver' | 'underMore' | 'lessOver' | 'lessMore' = 'underOver') {\n      const inRange = {\n        underOver: this.inRangeUnderOver,\n        underMore: this.inRangeUnderMore,\n        lessOver: this.inRangeLessOver,\n        lessMore: this.inRangeLessMore,\n      }[compare];\n\n      return inRange(a.start, b.start, a.end) || inRange(a.start, b.end, a.end);\n    },\n  };\n\n  public get templateRegex() {\n    return this._templateRegex;\n  }\n\n  public getSearchString = (text: string, selectionIndex: number) => {\n    const lastSpan = text.slice(0, selectionIndex).split(this.config.delimiter).pop() ?? '';\n    const triggerIdx = lastSpan.indexOf(this.config.trigger);\n    const mentionSpan = triggerIdx === -1 ? lastSpan : lastSpan.slice(triggerIdx);\n    const searchString = mentionSpan.slice(this.config.trigger.length);\n\n    return {\n      searchString,\n      isTriggered: () => mentionSpan.startsWith(this.config.trigger),\n      isValidSearchString: () => this._invalidStartsKeywords.every((it) => !searchString.startsWith(it)),\n    };\n  };\n\n  /**\n   * @description Reconcile the range by offset in the mentioned users\n   * */\n  public reconcileRangeOfMentionedUsers = (offset: number, selectionIndex: number, mentionedUsers: MentionedUser[]) => {\n    return mentionedUsers.map((it) => {\n      // Changes only on the right text of selection.\n      if (selectionIndex <= it.range.start) {\n        return {\n          ...it,\n          range: {\n            start: it.range.start + offset,\n            end: it.range.end + offset,\n          },\n        };\n      }\n\n      return it;\n    });\n  };\n\n  /**\n   * @description Remove users who in a range\n   * */\n  public removeMentionedUsersInSelection = (selection: Range, mentionedUsers: MentionedUser[]) => {\n    let lastSelection = 0;\n    let removedOffset = 0;\n    const filtered = mentionedUsers.filter((it) => {\n      const shouldRemove = this.rangeHelpers.overlaps(selection, it.range, 'lessMore');\n      if (shouldRemove) {\n        lastSelection = Math.max(lastSelection, it.range.end);\n        removedOffset -= it.range.end - it.range.start;\n      }\n      return !shouldRemove;\n    });\n\n    return { filtered, lastSelection, removedOffset };\n  };\n\n  public getSearchStringRangeInText = (selectionIndex: number, searchString: string): Range => {\n    return {\n      start: selectionIndex - searchString.length - this.config.trigger.length,\n      end: selectionIndex,\n    };\n  };\n\n  /**\n   * @description User to @{user.id} template format\n   * */\n  public asMentionedMessageTemplate = (user: SendbirdUser, delimiter = false) => {\n    return `${this.config.trigger}{${user.userId}}` + (delimiter ? this.config.delimiter : '');\n  };\n\n  /**\n   * @description User to @user.nickname text format\n   * */\n  public asMentionedMessageText = (user: SendbirdUser, delimiter = false) => {\n    return `${this.config.trigger}${user.nickname}` + (delimiter ? this.config.delimiter : '');\n  };\n\n  /**\n   * @description Bold @user.nickname\n   * */\n  public textToMentionedComponents = (text: string, mentionedUsers: MentionedUser[]) => {\n    if (!this.mentionEnabled || mentionedUsers.length === 0) return text;\n\n    const { leftText, components } = mentionedUsers\n      .sort((a, b) => b.range.start - a.range.start)\n      .reduce(\n        ({ leftText, components }, curr, currentIndex) => {\n          const leftSpan = leftText.slice(0, curr.range.start);\n          const mentionSpan = leftText.slice(curr.range.start, curr.range.end);\n          const rightSpan = leftText.slice(curr.range.end);\n\n          return {\n            leftText: leftSpan,\n            components: [\n              <Text key={mentionSpan + currentIndex} style={styles.mentionedText}>\n                {mentionSpan}\n              </Text>,\n              rightSpan,\n              ...components,\n            ],\n          };\n        },\n        { leftText: text, components: [] as (string | JSX.Element)[] },\n      );\n\n    return [leftText, ...components];\n  };\n\n  public textToMentionedMessageTemplate = (text: string, mentionedUsers: MentionedUser[]) => {\n    if (!this.mentionEnabled) return text;\n\n    const { leftText, strings } = mentionedUsers\n      .sort((a, b) => b.range.start - a.range.start)\n      .reduce(\n        ({ leftText, strings }, curr) => {\n          const leftSpan = leftText.slice(0, curr.range.start);\n          const templateSpan = this.asMentionedMessageTemplate(curr.user);\n          const rightSpan = leftText.slice(curr.range.end);\n\n          return {\n            leftText: leftSpan,\n            strings: [templateSpan, rightSpan, ...strings],\n          };\n        },\n        { leftText: text, strings: [] as string[] },\n      );\n\n    return [leftText, ...strings].join('');\n  };\n\n  /**\n   * @description Convert @{user.id} template to @user.nickname text and MentionedUser[] array.\n   * */\n  public templateToTextAndMentionedUsers = (template: string, mentionedUsers: SendbirdUser[]) => {\n    const actualMentionedUsers: MentionedUser[] = [];\n\n    let offsetToMove = 0;\n    const mentionedText = replaceWithRegex(\n      template,\n      this.templateRegex,\n      ({ match, matchIndex, groups }) => {\n        const user = mentionedUsers.find((it) => it.userId === groups[2]);\n        if (user && typeof matchIndex === 'number') {\n          const userIdSpan = match;\n          const userNicknameSpan = this.asMentionedMessageText(user);\n\n          const offsetAfterConverted = userNicknameSpan.length - userIdSpan.length;\n\n          const originalRange: Range = {\n            start: matchIndex,\n            end: matchIndex + userIdSpan.length,\n          };\n\n          const convertedRange: Range = {\n            start: Math.max(0, originalRange.start + offsetToMove),\n            end: originalRange.end + offsetToMove + offsetAfterConverted,\n          };\n\n          offsetToMove += offsetAfterConverted;\n\n          actualMentionedUsers.push({ range: convertedRange, user });\n          return userNicknameSpan;\n        }\n        return match;\n      },\n      '',\n    ).join('');\n\n    return {\n      mentionedText,\n      mentionedUsers: actualMentionedUsers,\n    };\n  };\n\n  public shouldUseMentionedMessageTemplate = (\n    message?: SendbirdUserMessage | SendbirdFileMessage,\n  ): message is RequiredSpecific<\n    SendbirdUserMessage | SendbirdFileMessage,\n    'mentionedMessageTemplate' | 'mentionedUsers' | 'mentionedUserIds' | 'mentionType'\n  > => {\n    return Boolean(\n      this.mentionEnabled &&\n        message?.mentionedMessageTemplate &&\n        message?.mentionedUsers &&\n        message?.mentionedUsers.length > 0,\n    );\n  };\n}\n\ntype RequiredSpecific<T, K extends keyof T> = T & {\n  [P in K]-?: T[P];\n};\n\nconst styles = createStyleSheet({\n  mentionedText: { fontWeight: 'bold' },\n});\n\nexport default MentionManager;\n"],"mappings":"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"}