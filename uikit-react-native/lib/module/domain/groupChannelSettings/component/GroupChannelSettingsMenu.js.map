{"version":3,"names":["React","useContext","View","PushTriggerOption","Icon","MenuBar","Switch","useUIKitTheme","Logger","conditionChaining","useIIFE","useLocalization","useSendbirdChat","GroupChannelSettingsContexts","WARN_onPressMenuNotification","WARN_onPressMenuSearchInChannel","GroupChannelSettingsMenu","_ref","onPressMenuModeration","onPressMenuMembers","onPressMenuSearchInChannel","onPressMenuLeaveChannel","onPressMenuNotification","menuItemsCreator","menu","sdk","features","channel","Fragment","STRINGS","colors","__DEV__","userMentionEnabled","warn","messageSearchEnabled","toggleNotification","myPushTriggerOption","setMyPushTriggerOption","DEFAULT","OFF","onPressNotificationMenu","actionLabelNotificationMenu","actionItemNotificationMenu","getNotificationsLabel","ALL","GROUP_CHANNEL_SETTINGS","MENU_NOTIFICATION_LABEL_ON","MENU_NOTIFICATION_LABEL_OFF","MENTION_ONLY","MENU_NOTIFICATION_LABEL_MENTION_ONLY","createElement","icon","color","onBackground01","value","onChangeValue","menuItems","visible","myRole","name","MENU_MODERATION","onPress","actionItem","MENU_NOTIFICATION","actionLabel","MENU_MEMBERS","String","memberCount","push","MENU_SEARCH","iconColor","error","MENU_LEAVE_CHANNEL","leave","then","clearCachedMessages","url","catch","map","key","disabled","iconBackgroundColor"],"sources":["GroupChannelSettingsMenu.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { View } from 'react-native';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport type { MenuBarProps } from '@sendbird/uikit-react-native-foundation';\nimport { Icon, MenuBar, Switch, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { Logger, conditionChaining, useIIFE } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport { GroupChannelSettingsContexts } from '../module/moduleContext';\nimport type { GroupChannelSettingsProps } from '../types';\n\nlet WARN_onPressMenuNotification = false;\nlet WARN_onPressMenuSearchInChannel = false;\n\nconst GroupChannelSettingsMenu = ({\n  onPressMenuModeration,\n  onPressMenuMembers,\n  onPressMenuSearchInChannel,\n  onPressMenuLeaveChannel,\n  onPressMenuNotification,\n  menuItemsCreator = (menu) => menu,\n}: GroupChannelSettingsProps['Menu']) => {\n  const { sdk, features } = useSendbirdChat();\n  const { channel } = useContext(GroupChannelSettingsContexts.Fragment);\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n\n  if (__DEV__ && !WARN_onPressMenuNotification && !onPressMenuNotification && features.userMentionEnabled) {\n    Logger.warn('If you are using mention, make sure to pass the `onPressMenuNotification` prop');\n    WARN_onPressMenuNotification = true;\n  }\n\n  if (__DEV__ && !WARN_onPressMenuSearchInChannel && !onPressMenuSearchInChannel && features.messageSearchEnabled) {\n    Logger.warn('If you are using message search, make sure to pass the `onPressMenuSearchInChannel` prop');\n    WARN_onPressMenuSearchInChannel = true;\n  }\n\n  const toggleNotification = async () => {\n    if (channel.myPushTriggerOption === 'off') {\n      await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n    } else {\n      await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n    }\n  };\n\n  const { onPressNotificationMenu, actionLabelNotificationMenu, actionItemNotificationMenu } = useIIFE(() => {\n    const getNotificationsLabel = () => {\n      switch (channel.myPushTriggerOption) {\n        case PushTriggerOption.ALL:\n        case PushTriggerOption.DEFAULT:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_ON;\n        case PushTriggerOption.OFF:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_OFF;\n        case PushTriggerOption.MENTION_ONLY:\n          return STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION_LABEL_MENTION_ONLY;\n      }\n    };\n\n    return {\n      actionLabelNotificationMenu: getNotificationsLabel(),\n      actionItemNotificationMenu: conditionChaining(\n        [features.userMentionEnabled],\n        [\n          <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n          <Switch value={channel.myPushTriggerOption !== 'off'} onChangeValue={toggleNotification} />,\n        ],\n      ),\n      onPressNotificationMenu: () => {\n        if (features.userMentionEnabled) onPressMenuNotification?.();\n        else toggleNotification();\n      },\n    };\n  });\n\n  const menuItems: MenuBarProps[] = menuItemsCreator([\n    {\n      icon: 'moderation',\n      visible: channel.myRole === 'operator',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MODERATION,\n      onPress: () => onPressMenuModeration(),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'notifications',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_NOTIFICATION,\n      onPress: onPressNotificationMenu,\n      actionLabel: actionLabelNotificationMenu,\n      actionItem: actionItemNotificationMenu,\n    },\n    {\n      icon: 'members',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_MEMBERS,\n      onPress: () => onPressMenuMembers(),\n      actionLabel: String(channel.memberCount),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n  ]);\n\n  if (features.messageSearchEnabled) {\n    menuItems.push({\n      icon: 'search',\n      name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_SEARCH,\n      onPress: () => onPressMenuSearchInChannel?.(),\n    });\n  }\n\n  menuItems.push({\n    icon: 'leave',\n    iconColor: colors.error,\n    name: STRINGS.GROUP_CHANNEL_SETTINGS.MENU_LEAVE_CHANNEL,\n    onPress: () => {\n      channel.leave().then(() => {\n        onPressMenuLeaveChannel();\n        sdk.clearCachedMessages([channel.url]).catch();\n      });\n    },\n  });\n\n  return (\n    <View>\n      {menuItems.map((menu) => {\n        return (\n          <MenuBar\n            key={menu.name}\n            onPress={menu.onPress}\n            name={menu.name}\n            disabled={menu.disabled}\n            visible={menu.visible}\n            icon={menu.icon}\n            iconColor={menu.iconColor}\n            iconBackgroundColor={menu.iconBackgroundColor}\n            actionLabel={menu.actionLabel}\n            actionItem={menu.actionItem}\n          />\n        );\n      })}\n    </View>\n  );\n};\n\nexport default GroupChannelSettingsMenu;\n"],"mappings":"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"}