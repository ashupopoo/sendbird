{"version":3,"names":["React","createContext","useState","useChannelHandler","NOOP","isDifferentChannel","useUniqHandlerId","ProviderLayout","useLocalization","useSendbirdChat","GroupChannelContexts","Fragment","headerTitle","channel","setMessageToEdit","TypingIndicator","typingUsers","PubSub","publish","subscribe","GroupChannelContextsProvider","_ref","children","enableTypingIndicator","keyboardAvoidOffset","groupChannelPubSub","Error","handlerId","STRINGS","currentUser","sdk","setTypingUsers","messageToEdit","onTypingStatusUpdated","eventChannel","getTypingUsers","createElement","Provider","value","GROUP_CHANNEL","HEADER_TITLE","userId"],"sources":["moduleContext.tsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport {\n  NOOP,\n  SendbirdFileMessage,\n  SendbirdGroupChannel,\n  SendbirdUser,\n  SendbirdUserMessage,\n  isDifferentChannel,\n  useUniqHandlerId,\n} from '@sendbird/uikit-utils';\n\nimport ProviderLayout from '../../../components/ProviderLayout';\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { PubSub } from '../../../utils/pubsub';\nimport type { GroupChannelContextsType, GroupChannelModule, GroupChannelPubSubContextPayload } from '../types';\n\nexport const GroupChannelContexts: GroupChannelContextsType = {\n  Fragment: createContext({\n    headerTitle: '',\n    channel: {} as SendbirdGroupChannel,\n    setMessageToEdit: NOOP,\n  }),\n  TypingIndicator: createContext({\n    typingUsers: [] as SendbirdUser[],\n  }),\n  PubSub: createContext({\n    publish: NOOP,\n    subscribe: () => NOOP,\n  } as PubSub<GroupChannelPubSubContextPayload>),\n};\n\nexport const GroupChannelContextsProvider: GroupChannelModule['Provider'] = ({\n  children,\n  channel,\n  enableTypingIndicator,\n  keyboardAvoidOffset = 0,\n  groupChannelPubSub,\n}) => {\n  if (!channel) throw new Error('GroupChannel is not provided to GroupChannelModule');\n\n  const handlerId = useUniqHandlerId('GroupChannelContextsProvider');\n  const { STRINGS } = useLocalization();\n  const { currentUser, sdk } = useSendbirdChat();\n\n  const [typingUsers, setTypingUsers] = useState<SendbirdUser[]>([]);\n  const [messageToEdit, setMessageToEdit] = useState<SendbirdUserMessage | SendbirdFileMessage>();\n\n  useChannelHandler(sdk, handlerId, {\n    onTypingStatusUpdated(eventChannel) {\n      if (isDifferentChannel(channel, eventChannel)) return;\n      if (!enableTypingIndicator) return;\n      setTypingUsers(eventChannel.getTypingUsers());\n    },\n  });\n\n  return (\n    <ProviderLayout>\n      <GroupChannelContexts.Fragment.Provider\n        value={{\n          headerTitle: STRINGS.GROUP_CHANNEL.HEADER_TITLE(currentUser?.userId ?? '', channel),\n          channel,\n          messageToEdit,\n          setMessageToEdit,\n          keyboardAvoidOffset,\n        }}\n      >\n        <GroupChannelContexts.TypingIndicator.Provider value={{ typingUsers }}>\n          <GroupChannelContexts.PubSub.Provider value={groupChannelPubSub}>\n            {children}\n          </GroupChannelContexts.PubSub.Provider>\n        </GroupChannelContexts.TypingIndicator.Provider>\n      </GroupChannelContexts.Fragment.Provider>\n    </ProviderLayout>\n  );\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,QAAQ,OAAO;AAEtD,SAASC,iBAAiB,QAAQ,4BAA4B;AAC9D,SACEC,IAAI,EAKJC,kBAAkB,EAClBC,gBAAgB,QACX,uBAAuB;AAE9B,OAAOC,cAAc,MAAM,oCAAoC;AAC/D,SAASC,eAAe,EAAEC,eAAe,QAAQ,2BAA2B;AAI5E,OAAO,MAAMC,oBAA8C,GAAG;EAC5DC,QAAQ,eAAEV,aAAa,CAAC;IACtBW,WAAW,EAAE,EAAE;IACfC,OAAO,EAAE,CAAC,CAAyB;IACnCC,gBAAgB,EAAEV;EACpB,CAAC,CAAC;EACFW,eAAe,eAAEd,aAAa,CAAC;IAC7Be,WAAW,EAAE;EACf,CAAC,CAAC;EACFC,MAAM,eAAEhB,aAAa,CAAC;IACpBiB,OAAO,EAAEd,IAAI;IACbe,SAAS,EAAEA,CAAA,KAAMf;EACnB,CAAC;AACH,CAAC;AAED,OAAO,MAAMgB,4BAA4D,GAAGC,IAAA,IAMtE;EAAA,IANuE;IAC3EC,QAAQ;IACRT,OAAO;IACPU,qBAAqB;IACrBC,mBAAmB,GAAG,CAAC;IACvBC;EACF,CAAC,GAAAJ,IAAA;EACC,IAAI,CAACR,OAAO,EAAE,MAAM,IAAIa,KAAK,CAAC,oDAAoD,CAAC;EAEnF,MAAMC,SAAS,GAAGrB,gBAAgB,CAAC,8BAA8B,CAAC;EAClE,MAAM;IAAEsB;EAAQ,CAAC,GAAGpB,eAAe,EAAE;EACrC,MAAM;IAAEqB,WAAW;IAAEC;EAAI,CAAC,GAAGrB,eAAe,EAAE;EAE9C,MAAM,CAACO,WAAW,EAAEe,cAAc,CAAC,GAAG7B,QAAQ,CAAiB,EAAE,CAAC;EAClE,MAAM,CAAC8B,aAAa,EAAElB,gBAAgB,CAAC,GAAGZ,QAAQ,EAA6C;EAE/FC,iBAAiB,CAAC2B,GAAG,EAAEH,SAAS,EAAE;IAChCM,qBAAqBA,CAACC,YAAY,EAAE;MAClC,IAAI7B,kBAAkB,CAACQ,OAAO,EAAEqB,YAAY,CAAC,EAAE;MAC/C,IAAI,CAACX,qBAAqB,EAAE;MAC5BQ,cAAc,CAACG,YAAY,CAACC,cAAc,EAAE,CAAC;IAC/C;EACF,CAAC,CAAC;EAEF,oBACEnC,KAAA,CAAAoC,aAAA,CAAC7B,cAAc,qBACbP,KAAA,CAAAoC,aAAA,CAAC1B,oBAAoB,CAACC,QAAQ,CAAC0B,QAAQ;IACrCC,KAAK,EAAE;MACL1B,WAAW,EAAEgB,OAAO,CAACW,aAAa,CAACC,YAAY,CAAC,CAAAX,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEY,MAAM,KAAI,EAAE,EAAE5B,OAAO,CAAC;MACnFA,OAAO;MACPmB,aAAa;MACblB,gBAAgB;MAChBU;IACF;EAAE,gBAEFxB,KAAA,CAAAoC,aAAA,CAAC1B,oBAAoB,CAACK,eAAe,CAACsB,QAAQ;IAACC,KAAK,EAAE;MAAEtB;IAAY;EAAE,gBACpEhB,KAAA,CAAAoC,aAAA,CAAC1B,oBAAoB,CAACO,MAAM,CAACoB,QAAQ;IAACC,KAAK,EAAEb;EAAmB,GAC7DH,QAAQ,CAC4B,CACO,CACT,CAC1B;AAErB,CAAC"}