{"version":3,"names":["React","useCallback","FlatList","useSafeAreaInsets","PushTriggerOption","useActionMenu","useToast","NOOP","PASS","getChannelUniqId","useFreshCallback","useLocalization","useSendbirdChat","GroupChannelListList","_ref","renderGroupChannelPreview","groupChannels","onLoadNext","flatListProps","menuItemCreator","toast","openMenu","STRINGS","sdk","currentUser","onLongPress","channel","action","myPushTriggerOption","menuItem","title","GROUP_CHANNEL_LIST","DIALOG_CHANNEL_TITLE","userId","menuItems","DIALOG_CHANNEL_NOTIFICATION","onPress","setMyPushTriggerOption","DEFAULT","OFF","onError","show","TOAST","TURN_ON_NOTIFICATIONS_ERROR","TURN_OFF_NOTIFICATIONS_ERROR","DIALOG_CHANNEL_LEAVE","leave","then","clearCachedMessages","url","catch","LEAVE_CHANNEL_ERROR","renderItem","_ref2","item","left","right","createElement","_extends","bounces","data","onEndReached","contentContainerStyle","paddingLeft","paddingRight","keyExtractor"],"sources":["GroupChannelListList.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { FlatList, ListRenderItem } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport { useActionMenu, useToast } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, PASS, SendbirdGroupChannel, getChannelUniqId, useFreshCallback } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { GroupChannelListProps } from '../types';\n\nconst GroupChannelListList = ({\n  renderGroupChannelPreview,\n  groupChannels,\n  onLoadNext,\n  flatListProps,\n  menuItemCreator = PASS,\n}: GroupChannelListProps['List']) => {\n  const toast = useToast();\n  const { openMenu } = useActionMenu();\n  const { STRINGS } = useLocalization();\n  const { sdk, currentUser } = useSendbirdChat();\n\n  const onLongPress = useFreshCallback((channel: SendbirdGroupChannel) => {\n    const action = channel.myPushTriggerOption === 'off' ? 'on' : 'off';\n    const menuItem = menuItemCreator({\n      title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_TITLE(currentUser?.userId ?? '', channel),\n      menuItems: [\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_NOTIFICATION(channel),\n          onPress: async () => {\n            if (action === 'on') {\n              await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n            } else {\n              await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n            }\n          },\n          onError: () => {\n            toast.show(\n              action === 'on' ? STRINGS.TOAST.TURN_ON_NOTIFICATIONS_ERROR : STRINGS.TOAST.TURN_OFF_NOTIFICATIONS_ERROR,\n              'error',\n            );\n          },\n        },\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_LEAVE,\n          onPress: async () => {\n            channel.leave().then(() => sdk.clearCachedMessages([channel.url]).catch(NOOP));\n          },\n          onError: () => toast.show(STRINGS.TOAST.LEAVE_CHANNEL_ERROR, 'error'),\n        },\n      ],\n    });\n\n    openMenu(menuItem);\n  });\n\n  const renderItem: ListRenderItem<SendbirdGroupChannel> = useCallback(\n    ({ item }) => renderGroupChannelPreview?.(item, () => onLongPress(item)),\n    [renderGroupChannelPreview, onLongPress],\n  );\n\n  const { left, right } = useSafeAreaInsets();\n  return (\n    <FlatList\n      bounces={false}\n      data={groupChannels}\n      renderItem={renderItem}\n      onEndReached={onLoadNext}\n      {...flatListProps}\n      contentContainerStyle={[flatListProps?.contentContainerStyle, { paddingLeft: left, paddingRight: right }]}\n      keyExtractor={getChannelUniqId}\n    />\n  );\n};\n\nexport default GroupChannelListList;\n"],"mappings":"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"}