{"version":3,"names":["React","View","RegexText","Text","createStyleSheet","useUIKitTheme","urlRegexStrict","useLocalization","useSendbirdChat","useUserProfile","SBUUtils","BaseUserMessage","_ref","message","variant","pressed","children","onLongPressMentionedUser","onLongPressURL","mentionManager","currentUser","show","STRINGS","colors","palette","color","ui","groupChannelMessage","createElement","style","styles","container","backgroundColor","background","wrapper","body3","textMsg","patterns","regex","templateRegex","replacer","_ref2","_message$mentionedUse","match","groups","parentProps","index","keyPrefix","user","mentionedUsers","find","it","userId","_extends","key","onPress","onLongPress","fontWeight","highlight","asMentionedMessageText","_ref3","openURL","textDecorationLine","shouldUseMentionedMessageTemplate","mentionedMessageTemplate","Boolean","updatedAt","textEdited","GROUP_CHANNEL","MESSAGE_BUBBLE_EDITED_POSTFIX","borderRadius","overflow","paddingHorizontal","paddingVertical"],"sources":["BaseUserMessage.tsx"],"sourcesContent":["import React from 'react';\nimport { View } from 'react-native';\n\nimport { RegexText, Text, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { urlRegexStrict } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat, useUserProfile } from '../../../hooks/useContext';\nimport SBUUtils from '../../../libs/SBUUtils';\nimport type { UserMessageProps } from './index';\n\nconst BaseUserMessage = ({\n  message,\n  variant,\n  pressed,\n  children,\n  onLongPressMentionedUser,\n  onLongPressURL,\n}: UserMessageProps) => {\n  const { mentionManager, currentUser } = useSendbirdChat();\n  const { show } = useUserProfile();\n  const { STRINGS } = useLocalization();\n  const { colors, palette } = useUIKitTheme();\n\n  const color = colors.ui.groupChannelMessage[variant][pressed ? 'pressed' : 'enabled'];\n\n  return (\n    <View style={[styles.container, { backgroundColor: color.background }]}>\n      <View style={styles.wrapper}>\n        <Text body3 color={color.textMsg}>\n          <RegexText\n            body3\n            color={color.textMsg}\n            patterns={[\n              {\n                regex: mentionManager.templateRegex,\n                replacer({ match, groups, parentProps, index, keyPrefix }) {\n                  const user = message.mentionedUsers?.find((it) => it.userId === groups[2]);\n                  if (user) {\n                    return (\n                      <Text\n                        {...parentProps}\n                        key={`${keyPrefix}-${index}`}\n                        onPress={() => show(user)}\n                        onLongPress={onLongPressMentionedUser}\n                        style={[\n                          parentProps?.style,\n                          { fontWeight: 'bold' },\n                          user.userId === currentUser?.userId && { backgroundColor: palette.highlight },\n                        ]}\n                      >\n                        {`${mentionManager.asMentionedMessageText(user)}`}\n                      </Text>\n                    );\n                  }\n                  return match;\n                },\n              },\n              {\n                regex: urlRegexStrict,\n                replacer({ match, parentProps, index, keyPrefix }) {\n                  return (\n                    <Text\n                      {...parentProps}\n                      key={`${keyPrefix}-${index}`}\n                      onPress={() => SBUUtils.openURL(match)}\n                      onLongPress={onLongPressURL}\n                      style={[parentProps?.style, { textDecorationLine: 'underline' }]}\n                    >\n                      {match}\n                    </Text>\n                  );\n                },\n              },\n            ]}\n          >\n            {mentionManager.shouldUseMentionedMessageTemplate(message)\n              ? message.mentionedMessageTemplate\n              : message.message}\n          </RegexText>\n          {Boolean(message.updatedAt) && (\n            <Text body3 color={color.textEdited}>\n              {STRINGS.GROUP_CHANNEL.MESSAGE_BUBBLE_EDITED_POSTFIX}\n            </Text>\n          )}\n        </Text>\n      </View>\n      {children}\n    </View>\n  );\n};\nconst styles = createStyleSheet({\n  container: {\n    borderRadius: 16,\n    overflow: 'hidden',\n  },\n  wrapper: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n  },\n});\n\nexport default BaseUserMessage;\n"],"mappings":"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"}