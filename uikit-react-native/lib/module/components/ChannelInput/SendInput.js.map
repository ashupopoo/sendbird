{"version":3,"names":["React","forwardRef","Platform","TouchableOpacity","View","MentionType","Icon","TextInput","createStyleSheet","useAlert","useBottomSheet","useToast","useUIKitTheme","isImage","shouldCompressImage","useLocalization","usePlatformService","useSendbirdChat","SBUError","SBUUtils","SendInput","_ref","ref","onPressSendUserMessage","onPressSendFileMessage","onSendUserMessage","onSendFileMessage","text","onChangeText","onSelectionChange","mentionedUsers","inputDisabled","inputFrozen","inputMuted","mentionManager","imageCompressionConfig","features","STRINGS","fileService","mediaService","colors","openSheet","alert","toast","sendUserMessage","mentionType","USERS","mentionedUserIds","map","it","user","userId","mentionedMessageTemplate","textToMentionedMessageTemplate","message","catch","onFailureToSend","type","userIds","messageTemplate","sendFileMessage","file","show","TOAST","SEND_MSG_ERROR","onPressAttachment","sheetItems","title","LABELS","CHANNEL_INPUT_ATTACHMENT_CAMERA","icon","onPress","mediaFile","openCamera","mediaType","onOpenFailure","error","code","CODE","ERR_PERMISSIONS_DENIED","DIALOG","ALERT_PERMISSIONS_TITLE","ALERT_PERMISSIONS_MESSAGE","PERMISSION_CAMERA","PERMISSION_APP_NAME","buttons","ALERT_PERMISSIONS_OK","openSettings","OPEN_CAMERA_ERROR","uri","imageCompressionEnabled","safeRun","compressed","compressImage","maxWidth","width","maxHeight","height","compressionRate","size","CHANNEL_INPUT_ATTACHMENT_PHOTO_LIBRARY","mediaFiles","openMediaLibrary","selectionLimit","PERMISSION_DEVICE_STORAGE","OPEN_PHOTO_LIBRARY_ERROR","CHANNEL_INPUT_ATTACHMENT_FILES","documentFile","openDocument","OPEN_FILES_ERROR","getPlaceholder","CHANNEL_INPUT_PLACEHOLDER_ACTIVE","CHANNEL_INPUT_PLACEHOLDER_DISABLED","CHANNEL_INPUT_PLACEHOLDER_MUTED","createElement","style","styles","sendInputContainer","disabled","color","ui","input","default","highlight","active","containerStyle","iconAttach","multiline","disableFullscreenUI","editable","placeholder","textToMentionedComponents","Boolean","trim","iconSend","paddingVertical","paddingHorizontal","alignItems","flexDirection","flex","marginRight","minHeight","select","ios","borderRadius","padding","marginLeft"],"sources":["SendInput.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport {\n  NativeSyntheticEvent,\n  Platform,\n  TextInput as RNTextInput,\n  TextInputSelectionChangeEventData,\n  TouchableOpacity,\n  View,\n} from 'react-native';\n\nimport { MentionType } from '@sendbird/chat/message';\nimport {\n  Icon,\n  TextInput,\n  createStyleSheet,\n  useAlert,\n  useBottomSheet,\n  useToast,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { isImage, shouldCompressImage } from '@sendbird/uikit-utils';\n\nimport { useLocalization, usePlatformService, useSendbirdChat } from '../../hooks/useContext';\nimport SBUError from '../../libs/SBUError';\nimport SBUUtils from '../../libs/SBUUtils';\nimport type { FileType } from '../../platform/types';\nimport type { MentionedUser } from '../../types';\nimport type { ChannelInputProps } from './index';\n\ninterface SendInputProps extends ChannelInputProps {\n  text: string;\n  onChangeText: (val: string) => void;\n  onSelectionChange: (e: NativeSyntheticEvent<TextInputSelectionChangeEventData>) => void;\n  mentionedUsers: MentionedUser[];\n}\n\nconst SendInput = forwardRef<RNTextInput, SendInputProps>(function SendInput(\n  {\n    onPressSendUserMessage,\n    onPressSendFileMessage,\n    onSendUserMessage,\n    onSendFileMessage,\n    text,\n    onChangeText,\n    onSelectionChange,\n    mentionedUsers,\n    inputDisabled,\n    inputFrozen,\n    inputMuted,\n  },\n  ref,\n) {\n  const { mentionManager, imageCompressionConfig, features } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { fileService, mediaService } = usePlatformService();\n  const { colors } = useUIKitTheme();\n  const { openSheet } = useBottomSheet();\n  const { alert } = useAlert();\n  const toast = useToast();\n\n  const sendUserMessage = () => {\n    const mentionType = MentionType.USERS;\n    const mentionedUserIds = mentionedUsers.map((it) => it.user.userId);\n    const mentionedMessageTemplate = mentionManager.textToMentionedMessageTemplate(text, mentionedUsers);\n\n    if (onPressSendUserMessage) {\n      onPressSendUserMessage({\n        message: text,\n        mentionType,\n        mentionedUserIds,\n        mentionedMessageTemplate,\n      }).catch(onFailureToSend);\n    } else if (onSendUserMessage) {\n      onSendUserMessage(text, {\n        type: mentionType,\n        userIds: mentionedUserIds,\n        messageTemplate: mentionedMessageTemplate,\n      }).catch(onFailureToSend);\n    }\n\n    onChangeText('');\n  };\n\n  const sendFileMessage = (file: FileType) => {\n    if (onPressSendFileMessage) {\n      onPressSendFileMessage({ file }).catch(onFailureToSend);\n    } else if (onSendFileMessage) {\n      onSendFileMessage(file).catch(onFailureToSend);\n    }\n  };\n\n  const onFailureToSend = () => toast.show(STRINGS.TOAST.SEND_MSG_ERROR, 'error');\n\n  const onPressAttachment = () => {\n    openSheet({\n      sheetItems: [\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_CAMERA,\n          icon: 'camera',\n          onPress: async () => {\n            const mediaFile = await fileService.openCamera({\n              mediaType: 'all',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_CAMERA,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_CAMERA_ERROR, 'error');\n                }\n              },\n            });\n\n            if (mediaFile) {\n              // Image compression\n              if (\n                isImage(mediaFile.uri, mediaFile.type) &&\n                shouldCompressImage(mediaFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: mediaFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    mediaFile.uri = compressed.uri;\n                    mediaFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(mediaFile);\n            }\n          },\n        },\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_PHOTO_LIBRARY,\n          icon: 'photo',\n          onPress: async () => {\n            const mediaFiles = await fileService.openMediaLibrary({\n              selectionLimit: 1,\n              mediaType: 'all',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_DEVICE_STORAGE,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_PHOTO_LIBRARY_ERROR, 'error');\n                }\n              },\n            });\n\n            if (mediaFiles && mediaFiles[0]) {\n              const mediaFile = mediaFiles[0];\n\n              // Image compression\n              if (\n                isImage(mediaFile.uri, mediaFile.type) &&\n                shouldCompressImage(mediaFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: mediaFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    mediaFile.uri = compressed.uri;\n                    mediaFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(mediaFile);\n            }\n          },\n        },\n        {\n          title: STRINGS.LABELS.CHANNEL_INPUT_ATTACHMENT_FILES,\n          icon: 'document',\n          onPress: async () => {\n            const documentFile = await fileService.openDocument({\n              onOpenFailure: () => toast.show(STRINGS.TOAST.OPEN_FILES_ERROR, 'error'),\n            });\n\n            if (documentFile) {\n              // Image compression\n              if (\n                isImage(documentFile.uri, documentFile.type) &&\n                shouldCompressImage(documentFile.type, features.imageCompressionEnabled)\n              ) {\n                await SBUUtils.safeRun(async () => {\n                  const compressed = await mediaService.compressImage({\n                    uri: documentFile.uri,\n                    maxWidth: imageCompressionConfig.width,\n                    maxHeight: imageCompressionConfig.height,\n                    compressionRate: imageCompressionConfig.compressionRate,\n                  });\n\n                  if (compressed) {\n                    documentFile.uri = compressed.uri;\n                    documentFile.size = compressed.size;\n                  }\n                });\n              }\n\n              sendFileMessage(documentFile);\n            }\n          },\n        },\n      ],\n    });\n  };\n\n  const getPlaceholder = () => {\n    if (!inputDisabled) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_ACTIVE;\n    if (inputFrozen) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n    if (inputMuted) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_MUTED;\n\n    return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n  };\n\n  return (\n    <View style={styles.sendInputContainer}>\n      <TouchableOpacity onPress={onPressAttachment} disabled={inputDisabled}>\n        <Icon\n          color={inputDisabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight}\n          icon={'add'}\n          size={24}\n          containerStyle={styles.iconAttach}\n        />\n      </TouchableOpacity>\n      <TextInput\n        ref={ref}\n        multiline\n        disableFullscreenUI\n        onSelectionChange={onSelectionChange}\n        editable={!inputDisabled}\n        onChangeText={onChangeText}\n        style={styles.input}\n        placeholder={getPlaceholder()}\n      >\n        {mentionManager.textToMentionedComponents(text, mentionedUsers)}\n      </TextInput>\n\n      {Boolean(text.trim()) && (\n        <TouchableOpacity onPress={sendUserMessage} disabled={inputDisabled}>\n          <Icon\n            color={\n              inputDisabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight\n            }\n            icon={'send'}\n            size={24}\n            containerStyle={styles.iconSend}\n          />\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n});\n\nconst styles = createStyleSheet({\n  sendInputContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  input: {\n    flex: 1,\n    marginRight: 4,\n    minHeight: 36,\n    maxHeight: 36 * Platform.select({ ios: 2.5, default: 2 }),\n    borderRadius: 20,\n  },\n  iconAttach: {\n    marginRight: 8,\n    padding: 4,\n  },\n  iconSend: {\n    marginLeft: 4,\n    padding: 4,\n  },\n});\n\nexport default SendInput;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAEEC,QAAQ,EAGRC,gBAAgB,EAChBC,IAAI,QACC,cAAc;AAErB,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SACEC,IAAI,EACJC,SAAS,EACTC,gBAAgB,EAChBC,QAAQ,EACRC,cAAc,EACdC,QAAQ,EACRC,aAAa,QACR,yCAAyC;AAChD,SAASC,OAAO,EAAEC,mBAAmB,QAAQ,uBAAuB;AAEpE,SAASC,eAAe,EAAEC,kBAAkB,EAAEC,eAAe,QAAQ,wBAAwB;AAC7F,OAAOC,QAAQ,MAAM,qBAAqB;AAC1C,OAAOC,QAAQ,MAAM,qBAAqB;AAY1C,MAAMC,SAAS,gBAAGnB,UAAU,CAA8B,SAASmB,SAASA,CAAAC,IAAA,EAc1EC,GAAG,EACH;EAAA,IAdA;IACEC,sBAAsB;IACtBC,sBAAsB;IACtBC,iBAAiB;IACjBC,iBAAiB;IACjBC,IAAI;IACJC,YAAY;IACZC,iBAAiB;IACjBC,cAAc;IACdC,aAAa;IACbC,WAAW;IACXC;EACF,CAAC,GAAAZ,IAAA;EAGD,MAAM;IAAEa,cAAc;IAAEC,sBAAsB;IAAEC;EAAS,CAAC,GAAGnB,eAAe,EAAE;EAC9E,MAAM;IAAEoB;EAAQ,CAAC,GAAGtB,eAAe,EAAE;EACrC,MAAM;IAAEuB,WAAW;IAAEC;EAAa,CAAC,GAAGvB,kBAAkB,EAAE;EAC1D,MAAM;IAAEwB;EAAO,CAAC,GAAG5B,aAAa,EAAE;EAClC,MAAM;IAAE6B;EAAU,CAAC,GAAG/B,cAAc,EAAE;EACtC,MAAM;IAAEgC;EAAM,CAAC,GAAGjC,QAAQ,EAAE;EAC5B,MAAMkC,KAAK,GAAGhC,QAAQ,EAAE;EAExB,MAAMiC,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMC,WAAW,GAAGxC,WAAW,CAACyC,KAAK;IACrC,MAAMC,gBAAgB,GAAGjB,cAAc,CAACkB,GAAG,CAAEC,EAAE,IAAKA,EAAE,CAACC,IAAI,CAACC,MAAM,CAAC;IACnE,MAAMC,wBAAwB,GAAGlB,cAAc,CAACmB,8BAA8B,CAAC1B,IAAI,EAAEG,cAAc,CAAC;IAEpG,IAAIP,sBAAsB,EAAE;MAC1BA,sBAAsB,CAAC;QACrB+B,OAAO,EAAE3B,IAAI;QACbkB,WAAW;QACXE,gBAAgB;QAChBK;MACF,CAAC,CAAC,CAACG,KAAK,CAACC,eAAe,CAAC;IAC3B,CAAC,MAAM,IAAI/B,iBAAiB,EAAE;MAC5BA,iBAAiB,CAACE,IAAI,EAAE;QACtB8B,IAAI,EAAEZ,WAAW;QACjBa,OAAO,EAAEX,gBAAgB;QACzBY,eAAe,EAAEP;MACnB,CAAC,CAAC,CAACG,KAAK,CAACC,eAAe,CAAC;IAC3B;IAEA5B,YAAY,CAAC,EAAE,CAAC;EAClB,CAAC;EAED,MAAMgC,eAAe,GAAIC,IAAc,IAAK;IAC1C,IAAIrC,sBAAsB,EAAE;MAC1BA,sBAAsB,CAAC;QAAEqC;MAAK,CAAC,CAAC,CAACN,KAAK,CAACC,eAAe,CAAC;IACzD,CAAC,MAAM,IAAI9B,iBAAiB,EAAE;MAC5BA,iBAAiB,CAACmC,IAAI,CAAC,CAACN,KAAK,CAACC,eAAe,CAAC;IAChD;EACF,CAAC;EAED,MAAMA,eAAe,GAAGA,CAAA,KAAMb,KAAK,CAACmB,IAAI,CAACzB,OAAO,CAAC0B,KAAK,CAACC,cAAc,EAAE,OAAO,CAAC;EAE/E,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9BxB,SAAS,CAAC;MACRyB,UAAU,EAAE,CACV;QACEC,KAAK,EAAE9B,OAAO,CAAC+B,MAAM,CAACC,+BAA+B;QACrDC,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnB,MAAMC,SAAS,GAAG,MAAMlC,WAAW,CAACmC,UAAU,CAAC;YAC7CC,SAAS,EAAE,KAAK;YAChBC,aAAa,EAAGC,KAAK,IAAK;cACxB,IAAIA,KAAK,CAACC,IAAI,KAAK3D,QAAQ,CAAC4D,IAAI,CAACC,sBAAsB,EAAE;gBACvDrC,KAAK,CAAC;kBACJyB,KAAK,EAAE9B,OAAO,CAAC2C,MAAM,CAACC,uBAAuB;kBAC7C3B,OAAO,EAAEjB,OAAO,CAAC2C,MAAM,CAACE,yBAAyB,CAC/C7C,OAAO,CAAC+B,MAAM,CAACe,iBAAiB,EAChC9C,OAAO,CAAC+B,MAAM,CAACgB,mBAAmB,CACnC;kBACDC,OAAO,EAAE,CAAC;oBAAE1D,IAAI,EAAEU,OAAO,CAAC2C,MAAM,CAACM,oBAAoB;oBAAEf,OAAO,EAAEA,CAAA,KAAMpD,QAAQ,CAACoE,YAAY;kBAAG,CAAC;gBACjG,CAAC,CAAC;cACJ,CAAC,MAAM;gBACL5C,KAAK,CAACmB,IAAI,CAACzB,OAAO,CAAC0B,KAAK,CAACyB,iBAAiB,EAAE,OAAO,CAAC;cACtD;YACF;UACF,CAAC,CAAC;UAEF,IAAIhB,SAAS,EAAE;YACb;YACA,IACE3D,OAAO,CAAC2D,SAAS,CAACiB,GAAG,EAAEjB,SAAS,CAACf,IAAI,CAAC,IACtC3C,mBAAmB,CAAC0D,SAAS,CAACf,IAAI,EAAErB,QAAQ,CAACsD,uBAAuB,CAAC,EACrE;cACA,MAAMvE,QAAQ,CAACwE,OAAO,CAAC,YAAY;gBACjC,MAAMC,UAAU,GAAG,MAAMrD,YAAY,CAACsD,aAAa,CAAC;kBAClDJ,GAAG,EAAEjB,SAAS,CAACiB,GAAG;kBAClBK,QAAQ,EAAE3D,sBAAsB,CAAC4D,KAAK;kBACtCC,SAAS,EAAE7D,sBAAsB,CAAC8D,MAAM;kBACxCC,eAAe,EAAE/D,sBAAsB,CAAC+D;gBAC1C,CAAC,CAAC;gBAEF,IAAIN,UAAU,EAAE;kBACdpB,SAAS,CAACiB,GAAG,GAAGG,UAAU,CAACH,GAAG;kBAC9BjB,SAAS,CAAC2B,IAAI,GAAGP,UAAU,CAACO,IAAI;gBAClC;cACF,CAAC,CAAC;YACJ;YAEAvC,eAAe,CAACY,SAAS,CAAC;UAC5B;QACF;MACF,CAAC,EACD;QACEL,KAAK,EAAE9B,OAAO,CAAC+B,MAAM,CAACgC,sCAAsC;QAC5D9B,IAAI,EAAE,OAAO;QACbC,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnB,MAAM8B,UAAU,GAAG,MAAM/D,WAAW,CAACgE,gBAAgB,CAAC;YACpDC,cAAc,EAAE,CAAC;YACjB7B,SAAS,EAAE,KAAK;YAChBC,aAAa,EAAGC,KAAK,IAAK;cACxB,IAAIA,KAAK,CAACC,IAAI,KAAK3D,QAAQ,CAAC4D,IAAI,CAACC,sBAAsB,EAAE;gBACvDrC,KAAK,CAAC;kBACJyB,KAAK,EAAE9B,OAAO,CAAC2C,MAAM,CAACC,uBAAuB;kBAC7C3B,OAAO,EAAEjB,OAAO,CAAC2C,MAAM,CAACE,yBAAyB,CAC/C7C,OAAO,CAAC+B,MAAM,CAACoC,yBAAyB,EACxCnE,OAAO,CAAC+B,MAAM,CAACgB,mBAAmB,CACnC;kBACDC,OAAO,EAAE,CAAC;oBAAE1D,IAAI,EAAEU,OAAO,CAAC2C,MAAM,CAACM,oBAAoB;oBAAEf,OAAO,EAAEA,CAAA,KAAMpD,QAAQ,CAACoE,YAAY;kBAAG,CAAC;gBACjG,CAAC,CAAC;cACJ,CAAC,MAAM;gBACL5C,KAAK,CAACmB,IAAI,CAACzB,OAAO,CAAC0B,KAAK,CAAC0C,wBAAwB,EAAE,OAAO,CAAC;cAC7D;YACF;UACF,CAAC,CAAC;UAEF,IAAIJ,UAAU,IAAIA,UAAU,CAAC,CAAC,CAAC,EAAE;YAC/B,MAAM7B,SAAS,GAAG6B,UAAU,CAAC,CAAC,CAAC;;YAE/B;YACA,IACExF,OAAO,CAAC2D,SAAS,CAACiB,GAAG,EAAEjB,SAAS,CAACf,IAAI,CAAC,IACtC3C,mBAAmB,CAAC0D,SAAS,CAACf,IAAI,EAAErB,QAAQ,CAACsD,uBAAuB,CAAC,EACrE;cACA,MAAMvE,QAAQ,CAACwE,OAAO,CAAC,YAAY;gBACjC,MAAMC,UAAU,GAAG,MAAMrD,YAAY,CAACsD,aAAa,CAAC;kBAClDJ,GAAG,EAAEjB,SAAS,CAACiB,GAAG;kBAClBK,QAAQ,EAAE3D,sBAAsB,CAAC4D,KAAK;kBACtCC,SAAS,EAAE7D,sBAAsB,CAAC8D,MAAM;kBACxCC,eAAe,EAAE/D,sBAAsB,CAAC+D;gBAC1C,CAAC,CAAC;gBAEF,IAAIN,UAAU,EAAE;kBACdpB,SAAS,CAACiB,GAAG,GAAGG,UAAU,CAACH,GAAG;kBAC9BjB,SAAS,CAAC2B,IAAI,GAAGP,UAAU,CAACO,IAAI;gBAClC;cACF,CAAC,CAAC;YACJ;YAEAvC,eAAe,CAACY,SAAS,CAAC;UAC5B;QACF;MACF,CAAC,EACD;QACEL,KAAK,EAAE9B,OAAO,CAAC+B,MAAM,CAACsC,8BAA8B;QACpDpC,IAAI,EAAE,UAAU;QAChBC,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnB,MAAMoC,YAAY,GAAG,MAAMrE,WAAW,CAACsE,YAAY,CAAC;YAClDjC,aAAa,EAAEA,CAAA,KAAMhC,KAAK,CAACmB,IAAI,CAACzB,OAAO,CAAC0B,KAAK,CAAC8C,gBAAgB,EAAE,OAAO;UACzE,CAAC,CAAC;UAEF,IAAIF,YAAY,EAAE;YAChB;YACA,IACE9F,OAAO,CAAC8F,YAAY,CAAClB,GAAG,EAAEkB,YAAY,CAAClD,IAAI,CAAC,IAC5C3C,mBAAmB,CAAC6F,YAAY,CAAClD,IAAI,EAAErB,QAAQ,CAACsD,uBAAuB,CAAC,EACxE;cACA,MAAMvE,QAAQ,CAACwE,OAAO,CAAC,YAAY;gBACjC,MAAMC,UAAU,GAAG,MAAMrD,YAAY,CAACsD,aAAa,CAAC;kBAClDJ,GAAG,EAAEkB,YAAY,CAAClB,GAAG;kBACrBK,QAAQ,EAAE3D,sBAAsB,CAAC4D,KAAK;kBACtCC,SAAS,EAAE7D,sBAAsB,CAAC8D,MAAM;kBACxCC,eAAe,EAAE/D,sBAAsB,CAAC+D;gBAC1C,CAAC,CAAC;gBAEF,IAAIN,UAAU,EAAE;kBACde,YAAY,CAAClB,GAAG,GAAGG,UAAU,CAACH,GAAG;kBACjCkB,YAAY,CAACR,IAAI,GAAGP,UAAU,CAACO,IAAI;gBACrC;cACF,CAAC,CAAC;YACJ;YAEAvC,eAAe,CAAC+C,YAAY,CAAC;UAC/B;QACF;MACF,CAAC;IAEL,CAAC,CAAC;EACJ,CAAC;EAED,MAAMG,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAC/E,aAAa,EAAE,OAAOM,OAAO,CAAC+B,MAAM,CAAC2C,gCAAgC;IAC1E,IAAI/E,WAAW,EAAE,OAAOK,OAAO,CAAC+B,MAAM,CAAC4C,kCAAkC;IACzE,IAAI/E,UAAU,EAAE,OAAOI,OAAO,CAAC+B,MAAM,CAAC6C,+BAA+B;IAErE,OAAO5E,OAAO,CAAC+B,MAAM,CAAC4C,kCAAkC;EAC1D,CAAC;EAED,oBACEhH,KAAA,CAAAkH,aAAA,CAAC9G,IAAI;IAAC+G,KAAK,EAAEC,MAAM,CAACC;EAAmB,gBACrCrH,KAAA,CAAAkH,aAAA,CAAC/G,gBAAgB;IAACoE,OAAO,EAAEN,iBAAkB;IAACqD,QAAQ,EAAEvF;EAAc,gBACpE/B,KAAA,CAAAkH,aAAA,CAAC5G,IAAI;IACHiH,KAAK,EAAExF,aAAa,GAAGS,MAAM,CAACgF,EAAE,CAACC,KAAK,CAACC,OAAO,CAACJ,QAAQ,CAACK,SAAS,GAAGnF,MAAM,CAACgF,EAAE,CAACC,KAAK,CAACC,OAAO,CAACE,MAAM,CAACD,SAAU;IAC7GrD,IAAI,EAAE,KAAM;IACZ6B,IAAI,EAAE,EAAG;IACT0B,cAAc,EAAET,MAAM,CAACU;EAAW,EAClC,CACe,eACnB9H,KAAA,CAAAkH,aAAA,CAAC3G,SAAS;IACRe,GAAG,EAAEA,GAAI;IACTyG,SAAS;IACTC,mBAAmB;IACnBnG,iBAAiB,EAAEA,iBAAkB;IACrCoG,QAAQ,EAAE,CAAClG,aAAc;IACzBH,YAAY,EAAEA,YAAa;IAC3BuF,KAAK,EAAEC,MAAM,CAACK,KAAM;IACpBS,WAAW,EAAEpB,cAAc;EAAG,GAE7B5E,cAAc,CAACiG,yBAAyB,CAACxG,IAAI,EAAEG,cAAc,CAAC,CACrD,EAEXsG,OAAO,CAACzG,IAAI,CAAC0G,IAAI,EAAE,CAAC,iBACnBrI,KAAA,CAAAkH,aAAA,CAAC/G,gBAAgB;IAACoE,OAAO,EAAE3B,eAAgB;IAAC0E,QAAQ,EAAEvF;EAAc,gBAClE/B,KAAA,CAAAkH,aAAA,CAAC5G,IAAI;IACHiH,KAAK,EACHxF,aAAa,GAAGS,MAAM,CAACgF,EAAE,CAACC,KAAK,CAACC,OAAO,CAACJ,QAAQ,CAACK,SAAS,GAAGnF,MAAM,CAACgF,EAAE,CAACC,KAAK,CAACC,OAAO,CAACE,MAAM,CAACD,SAC7F;IACDrD,IAAI,EAAE,MAAO;IACb6B,IAAI,EAAE,EAAG;IACT0B,cAAc,EAAET,MAAM,CAACkB;EAAS,EAChC,CAEL,CACI;AAEX,CAAC,CAAC;AAEF,MAAMlB,MAAM,GAAG5G,gBAAgB,CAAC;EAC9B6G,kBAAkB,EAAE;IAClBkB,eAAe,EAAE,EAAE;IACnBC,iBAAiB,EAAE,EAAE;IACrBC,UAAU,EAAE,QAAQ;IACpBC,aAAa,EAAE;EACjB,CAAC;EACDjB,KAAK,EAAE;IACLkB,IAAI,EAAE,CAAC;IACPC,WAAW,EAAE,CAAC;IACdC,SAAS,EAAE,EAAE;IACb7C,SAAS,EAAE,EAAE,GAAG9F,QAAQ,CAAC4I,MAAM,CAAC;MAAEC,GAAG,EAAE,GAAG;MAAErB,OAAO,EAAE;IAAE,CAAC,CAAC;IACzDsB,YAAY,EAAE;EAChB,CAAC;EACDlB,UAAU,EAAE;IACVc,WAAW,EAAE,CAAC;IACdK,OAAO,EAAE;EACX,CAAC;EACDX,QAAQ,EAAE;IACRY,UAAU,EAAE,CAAC;IACbD,OAAO,EAAE;EACX;AACF,CAAC,CAAC;AAEF,eAAe7H,SAAS"}