{"version":3,"names":["React","useState","Pressable","useChannelHandler","useMessageOutgoingStatus","GroupChannelPreview","Icon","LoadingSpinner","createStyleSheet","useUIKitTheme","getFileExtension","getFileType","isDifferentChannel","isMyMessage","useIIFE","useUniqHandlerId","ChannelCover","DEFAULT_LONG_PRESS_DELAY","useLocalization","useSendbirdChat","iconMapper","audio","image","video","file","GroupChannelPreviewContainer","_ref","onPress","onLongPress","channel","currentUser","sdk","features","mentionManager","STRINGS","colors","typingUsers","setTypingUsers","channelListTypingIndicatorEnabled","handlerId","onTypingStatusUpdated","eventChannel","getTypingUsers","outgoingStatus","lastMessage","bodyText","length","LABELS","TYPING_INDICATOR_TYPINGS","GROUP_CHANNEL_LIST","CHANNEL_PREVIEW_BODY","fileIcon","_channel$lastMessage","isFileMessage","undefined","type","name","titleCaptionIcon","channelListMessageReceiptStatusEnabled","userId","createElement","size","style","styles","icon","color","error","onBackground03","containerStyle","secondary","delayLongPress","customCover","coverUrl","title","CHANNEL_PREVIEW_TITLE","titleCaptionLeft","titleCaption","CHANNEL_PREVIEW_TITLE_CAPTION","body","bodyIcon","badgeCount","unreadMessageCount","mentioned","unreadMentionCount","mentionTrigger","config","trigger","memberCount","frozen","isFrozen","broadcast","isBroadcast","notificationOff","myPushTriggerOption","marginRight","broadcastCover","padding","borderRadius"],"sources":["GroupChannelPreviewContainer.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Pressable } from 'react-native';\n\nimport { useChannelHandler, useMessageOutgoingStatus } from '@sendbird/uikit-chat-hooks';\nimport {\n  GroupChannelPreview,\n  Icon,\n  LoadingSpinner,\n  createStyleSheet,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport {\n  SendbirdGroupChannel,\n  SendbirdUser,\n  getFileExtension,\n  getFileType,\n  isDifferentChannel,\n  isMyMessage,\n  useIIFE,\n  useUniqHandlerId,\n} from '@sendbird/uikit-utils';\n\nimport ChannelCover from '../components/ChannelCover';\nimport { DEFAULT_LONG_PRESS_DELAY } from '../constants';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst iconMapper = { audio: 'file-audio', image: 'photo', video: 'play', file: 'file-document' } as const;\n\ntype Props = {\n  channel: SendbirdGroupChannel;\n  onPress: () => void;\n  onLongPress: () => void;\n};\nconst GroupChannelPreviewContainer = ({ onPress, onLongPress, channel }: Props) => {\n  const { currentUser, sdk, features, mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n\n  const [typingUsers, setTypingUsers] = useState<SendbirdUser[]>([]);\n\n  if (features.channelListTypingIndicatorEnabled) {\n    const handlerId = useUniqHandlerId('GroupChannelPreviewContainer_TypingIndicator');\n    useChannelHandler(sdk, handlerId, {\n      onTypingStatusUpdated(eventChannel) {\n        if (isDifferentChannel(channel, eventChannel)) return;\n        setTypingUsers(eventChannel.getTypingUsers());\n      },\n    });\n  }\n\n  const outgoingStatus = useMessageOutgoingStatus(sdk, channel, channel.lastMessage);\n\n  const bodyText = useIIFE(() => {\n    if (typingUsers.length > 0) return STRINGS.LABELS.TYPING_INDICATOR_TYPINGS(typingUsers) || '';\n    else return STRINGS.GROUP_CHANNEL_LIST.CHANNEL_PREVIEW_BODY(channel);\n  });\n\n  const fileIcon = useIIFE(() => {\n    if (!channel.lastMessage?.isFileMessage()) return undefined;\n    if (typingUsers.length > 0) return undefined;\n    return iconMapper[getFileType(channel.lastMessage.type || getFileExtension(channel.lastMessage.name))];\n  });\n\n  const titleCaptionIcon = useIIFE(() => {\n    if (!channel.lastMessage) return undefined;\n    if (!features.channelListMessageReceiptStatusEnabled) return undefined;\n    if (!isMyMessage(channel.lastMessage, currentUser?.userId)) return undefined;\n\n    if (outgoingStatus === 'PENDING') {\n      return <LoadingSpinner size={16} style={styles.titleCaptionIcon} />;\n    }\n\n    if (outgoingStatus === 'FAILED') {\n      return <Icon icon={'error'} size={16} color={colors.error} style={styles.titleCaptionIcon} />;\n    }\n\n    if (outgoingStatus === 'UNDELIVERED') {\n      return <Icon icon={'done'} size={16} color={colors.onBackground03} containerStyle={styles.titleCaptionIcon} />;\n    }\n\n    if (outgoingStatus === 'DELIVERED' || outgoingStatus === 'UNREAD') {\n      return <Icon icon={'done-all'} size={16} color={colors.onBackground03} style={styles.titleCaptionIcon} />;\n    }\n\n    if (outgoingStatus === 'READ') {\n      return <Icon icon={'done-all'} size={16} color={colors.secondary} style={styles.titleCaptionIcon} />;\n    }\n\n    return undefined;\n  });\n\n  return (\n    <Pressable delayLongPress={DEFAULT_LONG_PRESS_DELAY} onPress={onPress} onLongPress={onLongPress}>\n      <GroupChannelPreview\n        customCover={<ChannelCover channel={channel} size={56} />}\n        coverUrl={channel.coverUrl}\n        title={STRINGS.GROUP_CHANNEL_LIST.CHANNEL_PREVIEW_TITLE(currentUser?.userId ?? '', channel)}\n        titleCaptionLeft={titleCaptionIcon}\n        titleCaption={STRINGS.GROUP_CHANNEL_LIST.CHANNEL_PREVIEW_TITLE_CAPTION(channel)}\n        body={bodyText}\n        bodyIcon={fileIcon}\n        badgeCount={channel.unreadMessageCount}\n        mentioned={channel.unreadMentionCount > 0}\n        mentionTrigger={mentionManager.config.trigger}\n        memberCount={channel.memberCount > 2 ? channel.memberCount : undefined}\n        frozen={channel.isFrozen}\n        broadcast={channel.isBroadcast}\n        notificationOff={channel.myPushTriggerOption === 'off'}\n      />\n    </Pressable>\n  );\n};\n\nconst styles = createStyleSheet({\n  titleCaptionIcon: {\n    marginRight: 4,\n  },\n  broadcastCover: {\n    padding: 12,\n    borderRadius: 28,\n  },\n});\n\nexport default GroupChannelPreviewContainer;\n"],"mappings":"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"}