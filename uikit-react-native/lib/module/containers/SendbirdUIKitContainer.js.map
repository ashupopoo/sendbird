{"version":3,"names":["React","useLayoutEffect","useMemo","useRef","useState","Platform","SafeAreaProvider","Sendbird","GroupChannelModule","OpenChannelModule","DialogProvider","Header","HeaderStyleProvider","LightUIKitTheme","ToastProvider","UIKitThemeProvider","NOOP","useIsFirstMount","LocalizationContext","LocalizationProvider","PlatformServiceProvider","ReactionProvider","SendbirdChatProvider","UserProfileProvider","EmojiManager","ImageCompressionConfig","InternalLocalCacheStorage","MentionConfig","MentionManager","StringSetEn","SBUDynamicModule","VERSION","InternalErrorBoundaryContainer","NetInfo","get","SendbirdUIKit","Object","freeze","PLATFORM","OS","toLowerCase","DEFAULT","AUTO_PUSH_TOKEN_REGISTRATION","CHANNEL_LIST_TYPING_INDICATOR","CHANNEL_LIST_MESSAGE_RECEIPT_STATUS","USE_USER_ID_FOR_NICKNAME","USER_MENTION","IMAGE_COMPRESSION","MESSAGE_SEARCH","SendbirdUIKitContainer","_ref","children","appId","chatOptions","platformServices","localization","styles","errorBoundary","toast","userProfile","userMention","imageCompression","defaultStringSet","stringSet","isFirstMount","unsubscribes","internalStorage","localCacheStorage","undefined","sdkInstance","setSdkInstance","sendbird","initializeSendbird","onInitialized","current","chatSDK","emojiManager","mentionManager","config","mentionLimit","MENTION_LIMIT","suggestionLimit","SUGGESTION_LIMIT","debounceMills","DEBOUNCE_MILLS","delimiter","DELIMITER","trigger","TRIGGER","enableUserMention","imageCompressionConfig","compressionRate","COMPRESSION_RATE","width","height","forEach","u","renderChildren","disabled","createElement","enableAutoPushTokenRegistration","enableChannelListTypingIndicator","enableChannelListMessageReceiptStatus","enableUseUserIdForNickname","enableImageCompression","enableMessageSearch","fileService","file","notificationService","notification","clipboardService","clipboard","mediaService","media","theme","HeaderComponent","defaultTitleAlign","defaultHeaderTitleAlign","statusBarTranslucent","dismissTimeout","onCreateChannel","onBeforeCreateChannel","Consumer","value","STRINGS","defaultLabels","alert","ok","DIALOG","ALERT_DEFAULT_OK","prompt","PROMPT_DEFAULT_OK","cancel","PROMPT_DEFAULT_CANCEL","placeholder","PROMPT_DEFAULT_PLACEHOLDER","init","modules","localCacheEnabled","Boolean","useAsyncStorageStore","newInstance","addExtension","addEventListener","_chatSDK$setOnlineLis","_chatSDK","_chatSDK$setOfflineLi","_chatSDK2","listener","callback","callbackType","callCount","unsubscribe","state","online","isConnected","isInternetReachable","push","setOnlineListener","call","onOnline","setOfflineListener","onOffline"],"sources":["SendbirdUIKitContainer.tsx"],"sourcesContent":["import React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { Platform } from 'react-native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport Sendbird from '@sendbird/chat';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport type { HeaderStyleContextType, UIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport {\n  DialogProvider,\n  Header,\n  HeaderStyleProvider,\n  LightUIKitTheme,\n  ToastProvider,\n  UIKitThemeProvider,\n} from '@sendbird/uikit-react-native-foundation';\nimport type {\n  SendbirdChatSDK,\n  SendbirdGroupChannel,\n  SendbirdGroupChannelCreateParams,\n  SendbirdMember,\n  SendbirdUser,\n} from '@sendbird/uikit-utils';\nimport { NOOP, useIsFirstMount } from '@sendbird/uikit-utils';\n\nimport { LocalizationContext, LocalizationProvider } from '../contexts/LocalizationCtx';\nimport { PlatformServiceProvider } from '../contexts/PlatformServiceCtx';\nimport { ReactionProvider } from '../contexts/ReactionCtx';\nimport type { UIKitFeaturesInSendbirdChatContext } from '../contexts/SendbirdChatCtx';\nimport { SendbirdChatProvider } from '../contexts/SendbirdChatCtx';\nimport { UserProfileProvider } from '../contexts/UserProfileCtx';\nimport EmojiManager from '../libs/EmojiManager';\nimport type { ImageCompressionConfigInterface } from '../libs/ImageCompressionConfig';\nimport ImageCompressionConfig from '../libs/ImageCompressionConfig';\nimport InternalLocalCacheStorage from '../libs/InternalLocalCacheStorage';\nimport MentionConfig, { MentionConfigInterface } from '../libs/MentionConfig';\nimport MentionManager from '../libs/MentionManager';\nimport StringSetEn from '../localization/StringSet.en';\nimport type { StringSet } from '../localization/StringSet.type';\nimport SBUDynamicModule from '../platform/dynamicModule';\nimport type {\n  ClipboardServiceInterface,\n  FileServiceInterface,\n  MediaServiceInterface,\n  NotificationServiceInterface,\n} from '../platform/types';\nimport type { ErrorBoundaryProps, LocalCacheStorage } from '../types';\nimport VERSION from '../version';\nimport InternalErrorBoundaryContainer from './InternalErrorBoundaryContainer';\n\nconst NetInfo = SBUDynamicModule.get('@react-native-community/netinfo', 'warn');\n\nexport const SendbirdUIKit = Object.freeze({\n  VERSION,\n  PLATFORM: Platform.OS.toLowerCase(),\n  DEFAULT: {\n    AUTO_PUSH_TOKEN_REGISTRATION: true,\n    CHANNEL_LIST_TYPING_INDICATOR: false,\n    CHANNEL_LIST_MESSAGE_RECEIPT_STATUS: false,\n    USE_USER_ID_FOR_NICKNAME: false,\n    USER_MENTION: false,\n    IMAGE_COMPRESSION: true,\n    MESSAGE_SEARCH: false,\n  },\n});\n\nexport type SendbirdUIKitContainerProps = React.PropsWithChildren<{\n  appId: string;\n  platformServices: {\n    file: FileServiceInterface;\n    notification: NotificationServiceInterface;\n    clipboard: ClipboardServiceInterface;\n    media: MediaServiceInterface;\n  };\n  chatOptions?: {\n    localCacheStorage?: LocalCacheStorage;\n    onInitialized?: (sdkInstance: SendbirdChatSDK) => SendbirdChatSDK;\n  } & Partial<UIKitFeaturesInSendbirdChatContext>;\n  localization?: {\n    stringSet?: StringSet;\n  };\n  styles?: {\n    theme?: UIKitTheme;\n    statusBarTranslucent?: boolean;\n    defaultHeaderTitleAlign?: 'left' | 'center';\n    defaultHeaderHeight?: number;\n    HeaderComponent?: HeaderStyleContextType['HeaderComponent'];\n  };\n  errorBoundary?: {\n    disabled?: boolean;\n    onError?: (props: ErrorBoundaryProps) => void;\n    ErrorInfoComponent?: (props: ErrorBoundaryProps) => JSX.Element;\n  };\n  toast?: {\n    dismissTimeout?: number;\n  };\n  userProfile?: {\n    onCreateChannel: (channel: SendbirdGroupChannel) => void;\n    onBeforeCreateChannel?: (\n      channelParams: SendbirdGroupChannelCreateParams,\n      users: SendbirdUser[] | SendbirdMember[],\n    ) => SendbirdGroupChannelCreateParams | Promise<SendbirdGroupChannelCreateParams>;\n  };\n  userMention?: Pick<Partial<MentionConfigInterface>, 'mentionLimit' | 'suggestionLimit' | 'debounceMills'>;\n  imageCompression?: Partial<ImageCompressionConfigInterface>;\n}>;\n\nconst SendbirdUIKitContainer = ({\n  children,\n  appId,\n  chatOptions,\n  platformServices,\n  localization,\n  styles,\n  errorBoundary,\n  toast,\n  userProfile,\n  userMention,\n  imageCompression,\n}: SendbirdUIKitContainerProps) => {\n  const defaultStringSet = localization?.stringSet ?? StringSetEn;\n\n  const isFirstMount = useIsFirstMount();\n  const unsubscribes = useRef<Array<() => void>>([]);\n  const internalStorage = useMemo(\n    () => (chatOptions?.localCacheStorage ? new InternalLocalCacheStorage(chatOptions.localCacheStorage) : undefined),\n    [chatOptions?.localCacheStorage],\n  );\n\n  const [sdkInstance, setSdkInstance] = useState<SendbirdChatSDK>(() => {\n    const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n    unsubscribes.current = sendbird.unsubscribes;\n    return sendbird.chatSDK;\n  });\n\n  const emojiManager = useMemo(() => new EmojiManager(internalStorage), [internalStorage]);\n\n  const mentionManager = useMemo(() => {\n    const config = new MentionConfig({\n      mentionLimit: userMention?.mentionLimit || MentionConfig.DEFAULT.MENTION_LIMIT,\n      suggestionLimit: userMention?.suggestionLimit || MentionConfig.DEFAULT.SUGGESTION_LIMIT,\n      debounceMills: userMention?.debounceMills ?? MentionConfig.DEFAULT.DEBOUNCE_MILLS,\n      delimiter: MentionConfig.DEFAULT.DELIMITER,\n      trigger: MentionConfig.DEFAULT.TRIGGER,\n    });\n    return new MentionManager(config, chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION);\n  }, [\n    chatOptions?.enableUserMention,\n    userMention?.mentionLimit,\n    userMention?.suggestionLimit,\n    userMention?.debounceMills,\n  ]);\n\n  const imageCompressionConfig = useMemo(() => {\n    return new ImageCompressionConfig({\n      compressionRate: imageCompression?.compressionRate || ImageCompressionConfig.DEFAULT.COMPRESSION_RATE,\n      width: imageCompression?.width,\n      height: imageCompression?.height,\n    });\n  }, [imageCompression?.compressionRate, imageCompression?.width, imageCompression?.height]);\n\n  useLayoutEffect(() => {\n    if (!isFirstMount) {\n      const sendbird = initializeSendbird(appId, internalStorage, chatOptions?.onInitialized);\n      setSdkInstance(sendbird.chatSDK);\n      unsubscribes.current = sendbird.unsubscribes;\n    }\n\n    return () => {\n      if (!isFirstMount) {\n        unsubscribes.current.forEach((u) => {\n          try {\n            u();\n          } catch {}\n        });\n      }\n    };\n  }, [appId, internalStorage]);\n\n  const renderChildren = () => {\n    if (errorBoundary?.disabled) {\n      return children;\n    } else {\n      return <InternalErrorBoundaryContainer {...errorBoundary}>{children}</InternalErrorBoundaryContainer>;\n    }\n  };\n\n  return (\n    <SafeAreaProvider>\n      <SendbirdChatProvider\n        sdkInstance={sdkInstance}\n        emojiManager={emojiManager}\n        mentionManager={mentionManager}\n        imageCompressionConfig={imageCompressionConfig}\n        enableAutoPushTokenRegistration={\n          chatOptions?.enableAutoPushTokenRegistration ?? SendbirdUIKit.DEFAULT.AUTO_PUSH_TOKEN_REGISTRATION\n        }\n        enableChannelListTypingIndicator={\n          chatOptions?.enableChannelListTypingIndicator ?? SendbirdUIKit.DEFAULT.CHANNEL_LIST_TYPING_INDICATOR\n        }\n        enableChannelListMessageReceiptStatus={\n          chatOptions?.enableChannelListMessageReceiptStatus ??\n          SendbirdUIKit.DEFAULT.CHANNEL_LIST_MESSAGE_RECEIPT_STATUS\n        }\n        enableUseUserIdForNickname={\n          chatOptions?.enableUseUserIdForNickname ?? SendbirdUIKit.DEFAULT.USE_USER_ID_FOR_NICKNAME\n        }\n        enableUserMention={chatOptions?.enableUserMention ?? SendbirdUIKit.DEFAULT.USER_MENTION}\n        enableImageCompression={chatOptions?.enableImageCompression ?? SendbirdUIKit.DEFAULT.IMAGE_COMPRESSION}\n        enableMessageSearch={chatOptions?.enableMessageSearch ?? SendbirdUIKit.DEFAULT.MESSAGE_SEARCH}\n      >\n        <LocalizationProvider stringSet={defaultStringSet}>\n          <PlatformServiceProvider\n            fileService={platformServices.file}\n            notificationService={platformServices.notification}\n            clipboardService={platformServices.clipboard}\n            mediaService={platformServices.media}\n          >\n            <UIKitThemeProvider theme={styles?.theme ?? LightUIKitTheme}>\n              <HeaderStyleProvider\n                HeaderComponent={styles?.HeaderComponent ?? Header}\n                defaultTitleAlign={styles?.defaultHeaderTitleAlign ?? 'left'}\n                statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n              >\n                <ToastProvider dismissTimeout={toast?.dismissTimeout}>\n                  <UserProfileProvider\n                    onCreateChannel={userProfile?.onCreateChannel}\n                    onBeforeCreateChannel={userProfile?.onBeforeCreateChannel}\n                    statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n                  >\n                    <ReactionProvider>\n                      <LocalizationContext.Consumer>\n                        {(value) => {\n                          const STRINGS = value?.STRINGS || defaultStringSet;\n                          return (\n                            <DialogProvider\n                              defaultLabels={{\n                                alert: { ok: STRINGS.DIALOG.ALERT_DEFAULT_OK },\n                                prompt: {\n                                  ok: STRINGS.DIALOG.PROMPT_DEFAULT_OK,\n                                  cancel: STRINGS.DIALOG.PROMPT_DEFAULT_CANCEL,\n                                  placeholder: STRINGS.DIALOG.PROMPT_DEFAULT_PLACEHOLDER,\n                                },\n                              }}\n                            >\n                              {renderChildren()}\n                            </DialogProvider>\n                          );\n                        }}\n                      </LocalizationContext.Consumer>\n                    </ReactionProvider>\n                  </UserProfileProvider>\n                </ToastProvider>\n              </HeaderStyleProvider>\n            </UIKitThemeProvider>\n          </PlatformServiceProvider>\n        </LocalizationProvider>\n      </SendbirdChatProvider>\n    </SafeAreaProvider>\n  );\n};\n\nconst initializeSendbird = (\n  appId: string,\n  internalStorage?: InternalLocalCacheStorage,\n  onInitialized?: (sdk: SendbirdChatSDK) => SendbirdChatSDK,\n) => {\n  const unsubscribes: Array<() => void> = [];\n  let chatSDK: SendbirdChatSDK;\n\n  chatSDK = Sendbird.init({\n    appId,\n    modules: [new GroupChannelModule(), new OpenChannelModule()],\n    localCacheEnabled: Boolean(internalStorage),\n    useAsyncStorageStore: internalStorage as never,\n    newInstance: true,\n  });\n\n  if (onInitialized) {\n    chatSDK = onInitialized(chatSDK);\n  }\n\n  if (SendbirdUIKit.VERSION) {\n    chatSDK.addExtension('sb_uikit', SendbirdUIKit.VERSION);\n  }\n\n  if (SendbirdUIKit.PLATFORM) {\n    chatSDK.addExtension('device-os-platform', SendbirdUIKit.PLATFORM);\n  }\n\n  if (NetInfo?.addEventListener) {\n    try {\n      // NOTE: For removing buggy behavior of NetInfo.addEventListener\n      //  When you first add an event listener, it is assumed that the initialization of the internal event detector is done simultaneously.\n      //  In other words, when you call the first event listener two events are triggered immediately\n      //   - the one that is called when adding the event listener\n      //   - and the internal initialization event\n      NetInfo.addEventListener(NOOP)();\n    } catch {}\n\n    const listener = (callback: () => void, callbackType: 'online' | 'offline') => {\n      let callCount = 0;\n      const unsubscribe = NetInfo.addEventListener((state) => {\n        const online = Boolean(state.isConnected) || Boolean(state.isInternetReachable);\n\n        // NOTE: When NetInfo.addEventListener is called\n        //  the event is immediately triggered regardless of whether the event actually occurred.\n        //  This is why it filters the first event.\n        if (callCount === 0) {\n          callCount++;\n          return;\n        }\n\n        if (online && callbackType === 'online') callback();\n        if (!online && callbackType === 'offline') callback();\n      });\n      unsubscribes.push(unsubscribe);\n      return unsubscribe;\n    };\n    chatSDK.setOnlineListener?.((onOnline) => listener(onOnline, 'online'));\n    chatSDK.setOfflineListener?.((onOffline) => listener(onOffline, 'offline'));\n  }\n  return { chatSDK, unsubscribes };\n};\n\nexport default SendbirdUIKitContainer;\n"],"mappings":"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"}